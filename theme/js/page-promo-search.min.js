$(function(){function n(){var t=e.serialize();arguments.length&&($(arguments[0]).hasClass("psa__view-list")?t+="&view=list":$(arguments[0]).hasClass("psa__view-table")?t+="&view=table":t=arguments[0].href.slice(arguments[0].href.indexOf("/ankety?")+8)),s.show(),urlString="/ankety?"+t,$.ajax({type:"GET",url:"/ankety",data:t,success:function(t){i.html(t),""!==redirect&&(document.location.href=redirect),null!=arSeo.url&&(urlString=arSeo.url),null!=arSeo.seo_h1?$("h1").text(arSeo.seo_h1):$("h1").text("Поиск соискателей"),null!=arSeo.meta_keywords?$(l).html(arSeo.meta_keywords):$(l).html(""),null!=arSeo.meta_title?document.title=arSeo.meta_title:document.title="Поиск соискателей",window.history.pushState("object or string","page name",urlString),$("html, body").animate({scrollTop:i.offset().top-100},700),s.hide()}})}var e=$("#F1Filter"),i=$("#content"),s=$(".psa__veil"),l="#psa-seo-text",a=!1,o=$(".filter-positions input");$(".psa__filter-name").click(function(){var t=$(this);t.hasClass("opened")?(t.siblings(".psa__filter-content").slideUp(200),setTimeout(function(){t.removeClass("opened"),t.siblings(".psa__filter-content").removeClass("opened")},200)):(t.addClass("opened"),t.siblings(".psa__filter-content").slideDown(500),t.siblings(".psa__filter-content").addClass("opened"))}),$(".filter-positions input").change(function(){if($(this).is(o[0]))if($(this).is(":checked"))for(t=1;t<o.length;t++)$(o[t]).prop("checked",!0);else for(var t=1;t<o.length;t++)$(o[t]).prop("checked",!1);setTimeout(function(){n()},300)}),$(".psa__filter-btn").click(function(){setTimeout(function(){n()},300)}),$(".filter-sex input, .filter-additional input, .filter-card input").change(function(){setTimeout(function(){n()},300)}),$("#content").on("click",".paging-wrapp a",function(t){t.preventDefault(),n(t.target)}),$("#content").on("click",".psa__view-block a",function(t){t.preventDefault(),n(t.target)}),$(".more-posts").click(function(){$(this).closest(".psa__filter-content").css({height:"inherit"}),$(this).fadeOut()});var t=$("#F1Filter");function c(t,e){var i=$(e),s=$("#filter-city").data("city"),l=i.closest(".filter-city-select")[0],a=$(l).siblings(".select-list")[0],n=$(".filter-city-select").find('[type="hidden"]'),o="query="+t+"&idco="+s,c=t.toLowerCase(),r=[],f="";if(n.length)for(var d=0,u=n.length;d<u;d++)r.push($(n[d]).val());$(l).addClass("load"),$.ajax({type:"POST",url:MainConfig.AJAX_GET_VE_GET_CITIES,data:o,dataType:"json",success:function(t){for(var e in t.suggestions){var i=t.suggestions[e],s=i.data;if(isNaN(i.data))break;$.inArray(s,r)<0&&0<=i.value.toLowerCase().indexOf(c)&&(f+='<li data-id="'+i.data+'" data-metro="'+i.ismetro+'">'+i.value+"</li>")}f?$(a).html(f).fadeIn():$(a).html('<li class="emp">Список пуст</li>').fadeIn(),$(l).removeClass("load")}})}$(window).on("load resize",function(){$(window).width()<"751"?$(".psa__filter-vis").hasClass("active")?t.show():t.hide():t.show()}),$(".psa__filter-vis").click(function(){$(this).hasClass("active")?t.fadeOut():t.fadeIn(),$(this).toggleClass("active")}),$("#filter-city").on("input",".city-inp",function(t){var e=$(t.target),i=e.val();e.css({width:10*i.length+5+"px"}),clearTimeout(a),a=setTimeout(function(){c(i,e)},1e3)}),$("#filter-city").on("focus",".city-inp",function(t){var e=$(t.target),i=e.val();e.val("").val(i),c(i,e)}),$("#filter-city").on("click",".filter-city-select",function(t){$(t.target).is("b")||$(t.target).find(".city-inp").focus()}),$(document).on("click",function(t){var e=$(t.target);$("#filter-city .select-list");if(e.closest("#filter-city").length||e.is("#filter-city"))if(e.is(".select-list li")&&!e.hasClass("emp")){var i=e.closest("#filter-city")[0],s=$(i).find(".filter-city-select"),l=$(i).find(".city-inp"),a=$(i).find(".select-list");l.val("").css({width:"5px"}),$(s).find('[data-id="0"]').before("<li>"+e.text()+'<b></b><input name="cities[]" type="hidden" value="'+t.target.dataset.id+'"/></li>'),a.fadeOut(),setTimeout(n(),300)}else e.is(".filter-city-select b")&&(e.closest("li").remove(),setTimeout(n(),300));else $("#filter-city .city-inp").val("").css({width:"5px"}),$("#filter-city .select-list").fadeOut()})});