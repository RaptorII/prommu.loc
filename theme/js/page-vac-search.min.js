$(function(){function n(t){var e=i.serialize();arguments.length&&($(t).hasClass("psv__view-list")?e+="&view=list":$(t).hasClass("psv__view-table")?e+="&view=table":e=t.href.slice(t.href.indexOf("/vacancy?")+9)),a.show(),urlString="/vacancy?"+e,$.ajax({type:"GET",url:"/vacancy",data:e,success:function(t){s.html(t),""!==redirect&&(document.location.href=redirect),null!=arSeo.url&&(urlString=arSeo.url),null!=arSeo.seo_h1?$("h1").text(arSeo.seo_h1):$("h1").text("Поиск вакансий"),null!=arSeo.meta_keywords?$(f).html(arSeo.meta_keywords):$(f).html(""),null!=arSeo.meta_title?document.title=arSeo.meta_title:document.title="Поиск вакансий",window.history.pushState("object or string","page name",urlString),l&&$("html, body").animate({scrollTop:s.offset().top-100},700),a.hide()}})}var i=$("#F1Filter"),s=$("#content"),l=$(".filter-dolj .psv__checkbox-input"),a=$(".psv__veil"),c=$(".psv__salary .psv__input"),o=$("#psv-salary-type"),r=!1,f="#psv-seo-text";function u(t,e){var i=$(e),s=$("#filter-city").data("city"),l=i.closest(".filter-city-select")[0],a=$(l).siblings(".select-list")[0],n=$(".filter-city-select").find('[type="hidden"]'),c="query="+t+"&idco="+s,o=t.toLowerCase(),r=[],f="";if(n.length)for(var u=0,p=n.length;u<p;u++)r.push($(n[u]).val());$(l).addClass("load"),$.ajax({type:"POST",url:MainConfig.AJAX_GET_VE_GET_CITIES,data:c,dataType:"json",success:function(t){for(var e in t.suggestions){var i=t.suggestions[e],s=i.data;if(isNaN(i.data))break;$.inArray(s,r)<0&&0<=i.value.toLowerCase().indexOf(o)&&(f+='<li data-id="'+i.data+'" data-metro="'+i.ismetro+'">'+i.value+"</li>")}f?$(a).html(f).fadeIn():$(a).html('<li class="emp">Список пуст</li>').fadeIn(),$(l).removeClass("load")}})}$(".filter-dolj .psv__checkbox-input").change(function(){if($(this).is(l[0]))if($(this).is(":checked"))for(t=1;t<l.length;t++)$(l[t]).prop("checked",!0);else for(var t=1;t<l.length;t++)$(l[t]).prop("checked",!1);setTimeout(function(){n()},300)}),$(".filter-busy input, .filter-sex input, .filter-smart input, .filter-card input").change(function(){setTimeout(function(){n()},300)}),c.focus(function(){for(var t=1,e=0;e<c.length;e++)$(this).is(c[e])&&(t=5<e?4:e<4?1<e?2:1:3);for(e=0;e<c.length;e++)(1==t&&0!=e&&1!=e||2==t&&2!=e&&3!=e||3==t&&4!=e&&5!=e||4==t&&6!=e&&7!=e)&&$(c[e]).val("");o.val(t)}),$(".psv__filter-btn").click(function(){var t=$(this).closest(".filter-label");if($(t).hasClass("filter-age")){var e=$(t).find("input"),i=Number($(e[0]).val()),s=Number($(e[1]).val());i<14&&($(e[0]).val("14"),i=14),s<i&&0<s&&$(e[1]).val("14")}setTimeout(function(){n()},300)}),$("#content").on("click",".paging-wrapp a",function(t){t.preventDefault(),n(t.target)}),$("#content").on("click",".psv__view-block a",function(t){t.preventDefault(),n(t.target)}),$(".more-posts").click(function(){$(this).closest(".filter-content").css({height:"inherit"}),$(this).fadeOut()}),$(window).on("load resize",function(){$(window).width()<"768"?$(".psv__filter-vis").hasClass("active")?i.show():i.hide():i.show()}),$(".psv__filter-vis").click(function(){$(this).hasClass("active")?i.fadeOut():i.fadeIn(),$(this).toggleClass("active")}),$(".filter-salary input,.filter-age input").on("input",function(){var t=$(this).val().replace(/\D+/g,"");$(this).val(t)}),$("#filter-city").on("input",".city-inp",function(t){var e=$(t.target),i=e.val();e.css({width:10*i.length+5+"px"}),clearTimeout(r),r=setTimeout(function(){u(i,e)},1e3)}),$("#filter-city").on("focus",".city-inp",function(t){var e=$(t.target),i=e.val();e.val("").val(i),u(i,e)}),$("#filter-city").on("click",".filter-city-select",function(t){$(t.target).is("b")||$(t.target).find(".city-inp").focus()}),$(document).on("click",function(t){var e=$(t.target);if($("#filter-city .select-list"),e.closest("#filter-city").length||e.is("#filter-city"))if(e.is(".select-list li")&&!e.hasClass("emp")){var i=e.closest("#filter-city")[0],s=$(i).find(".filter-city-select"),l=$(i).find(".city-inp"),a=$(i).find(".select-list");l.val("").css({width:"5px"}),$(s).find('[data-id="0"]').before("<li>"+e.text()+'<b></b><input name="cities[]" type="hidden" value="'+t.target.dataset.id+'"/></li>'),a.fadeOut(),setTimeout(n(),300)}else e.is(".filter-city-select b")&&(e.closest("li").remove(),setTimeout(n(),300));else $("#filter-city .city-inp").val("").css({width:"5px"}),$("#filter-city .select-list").fadeOut()}),$(document).on("click",".psv-list__responce-btn",function(t){$.get(MainConfig.AJAX_POST_SETVACATIONRESPONSE,{id:this.dataset.id,url:"list"},function(t){null!=typeof(t=JSON.parse(t)).message&&($("body").append('<div class="prmu__popup"><p>'+t.message+"</p></div>"),$.fancybox.open({src:"body>div.prmu__popup",type:"inline",touch:!1,afterClose:function(){$("body>div.prmu__popup").remove()}}))})})});