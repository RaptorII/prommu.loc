$(function(){function n(){var e=i.serialize();arguments.length&&(e=arguments[0].href.slice(arguments[0].href.indexOf("/searchempl?")+12)),urlString=0<=e.indexOf("/searchempl")?"/searchempl":"/searchempl?"+e,a.show(),$.ajax({type:"GET",url:t,data:e,success:function(e){s.html(e),""!==redirect&&(document.location.href=redirect),null!=arSeo?(void 0!==arSeo.meta_title?document.title=arSeo.meta_title:document.title="Поиск работодателей",$("*").is(l)&&(void 0!==arSeo.seo_h1?$(l).text(arSeo.seo_h1):$(l).text("")),void 0!==arSeo.meta_keywords?$(o).html(arSeo.meta_keywords):$(o).html("")):(document.title="Поиск работодателей",$(l).text(""),$(o).html("")),window.history.pushState("object or string","page name",urlString),r=urlString,$("html, body").animate({scrollTop:s.offset().top-100},700),a.hide()}})}var t="/searchempl",i=$("#F1Filter"),s=$("#content"),a=$(".pse__veil"),l="#pse-seo-h1",o="#pse-seo-text",c=!1,r=document.location.pathname+document.location.search;setInterval(function(){var e;(e=document.location.pathname+document.location.search)!==r&&n(!1,r=e)},500),i.on("change",".filter-type input",function(){var e=$(".filter-type input");if($(this).is(e[0]))if($(this).is(":checked"))for(t=1;t<e.length;t++)$(e[t]).prop("checked",!0);else for(var t=1;t<e.length;t++)$(e[t]).prop("checked",!1);setTimeout(function(){n()},300)}),$(document).click(function(e){if($(e.target).hasClass("pse__filter-btn"))setTimeout(function(){n()},300);else if($(e.target).hasClass("pse__filter-name")){var t=$(e.target);t.hasClass("opened")?(t.siblings(".pse__filter-content").slideUp(200),setTimeout(function(){t.removeClass("opened"),t.siblings(".pse__filter-content").removeClass("opened")},200)):(t.addClass("opened"),t.siblings(".pse__filter-content").slideDown(500),t.siblings(".pse__filter-content").addClass("opened"))}}),$("#content").on("click",".paging-wrapp a",function(e){e.preventDefault(),n(e.target)});var e=$("#F1Filter");function f(e,t){var i=$(t),s=$("#filter-city").data("city"),a=i.closest(".filter-city-select")[0],l=$(a).siblings(".select-list")[0],n=$(".filter-city-select").find('[type="hidden"]'),o="query="+e+"&idco="+s,c=e.toLowerCase(),r=[],f="";if(n.length)for(var d=0,u=n.length;d<u;d++)r.push($(n[d]).val());$(a).addClass("load"),$.ajax({type:"POST",url:MainConfig.AJAX_GET_VE_GET_CITIES,data:o,dataType:"json",success:function(e){for(var t in e.suggestions){var i=e.suggestions[t],s=i.data;if(isNaN(i.data))break;$.inArray(s,r)<0&&0<=i.value.toLowerCase().indexOf(c)&&(f+='<li data-id="'+i.data+'" data-metro="'+i.ismetro+'">'+i.value+"</li>")}f?$(l).html(f).fadeIn():$(l).html('<li class="emp">Список пуст</li>').fadeIn(),$(a).removeClass("load")}})}$(window).on("load resize",function(){$(window).width()<"768"?$(".pse__filter-vis").hasClass("active")?e.show():e.hide():e.show()}),$(".pse__filter-vis").click(function(){$(this).hasClass("active")?e.fadeOut():e.fadeIn(),$(this).toggleClass("active")}),$("#filter-city").on("input",".city-inp",function(e){var t=$(e.target),i=t.val();t.css({width:10*i.length+5+"px"}),clearTimeout(c),c=setTimeout(function(){f(i,t)},1e3)}),$("#filter-city").on("focus",".city-inp",function(e){var t=$(e.target),i=t.val();t.val("").val(i),f(i,t)}),$("#filter-city").on("click",".filter-city-select",function(e){$(e.target).is("b")||$(e.target).find(".city-inp").focus()}),$(document).on("click",function(e){var t=$(e.target);$("#filter-city .select-list");if(t.closest("#filter-city").length||t.is("#filter-city"))if(t.is(".select-list li")&&!t.hasClass("emp")){var i=t.closest("#filter-city")[0],s=$(i).find(".filter-city-select"),a=$(i).find(".city-inp"),l=$(i).find(".select-list");a.val("").css({width:"5px"}),$(s).find('[data-id="0"]').before("<li>"+t.text()+'<b></b><input name="cities[]" type="hidden" value="'+e.target.dataset.id+'"/></li>'),l.fadeOut(),setTimeout(n(),300)}else t.is(".filter-city-select b")&&(t.closest("li").remove(),setTimeout(n(),300));else $("#filter-city .city-inp").val("").css({width:"5px"}),$("#filter-city .select-list").fadeOut()})});

$(function() {
//fixed menu in personal account
    var posAccMenu = $('.personal-acc__menu').offset().top - 100;
    $(window).on('resize scroll', scrollAccMenu);
    scrollAccMenu();

    function scrollAccMenu() {
        (
            $(document).scrollTop() > posAccMenu
            &&
            $(window).width() < 768
        )
            ? $('.personal-acc__menu').addClass('fixed')
            : $('.personal-acc__menu').removeClass('fixed');
    }
});