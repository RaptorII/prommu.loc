$(function(){function e(e=false, n=''){var i=s.serialize(),u=s.serializeArray(),h=!1,d="";if($.each(u,function(e,t){"cities[]"==t.name?"1838"==t.value&&(h=!0):""!=t.value&&(d+=(""==d?"?":"&")+t.name+"="+t.value)}),h&&(document.location.href="http://spb.prommu.com/searchempl"+d),e&&(e.preventDefault(),i=e.target.href.slice(e.target.href.indexOf(a+"?")+12)),""!=n){urlString=n,i=n.slice(n.indexOf(a+"?")+12),u=[];for(var m=i.split("&"),v=0;v<m.length;v++)hash=m[v].split("="),u.push({name:hash[0],value:hash[1]});clearInterval(p)}else urlString=a+"?"+i;l.show(),$.ajax({type:"GET",url:a,data:i,success:function(n){o.html(n),null!=arSeo?(void 0!==arSeo.meta_title?document.title=arSeo.meta_title:document.title="Поиск работодателей",$("*").is(r)&&(void 0!==arSeo.seo_h1?$(r).text(arSeo.seo_h1):$(r).text("")),void 0!==arSeo.meta_keywords?$(c).html(arSeo.meta_keywords):$(c).html("")):(document.title="Поиск работодателей",$(r).text(""),$(c).html("")),window.history.pushState("object or string","page name",urlString),f=urlString,e&&$("html, body").animate({scrollTop:o.offset().top-100},700),l.hide();/*t(u)*/}})}function t(e){$.ajax({type:"POST",url:a,data:"all="+JSON.stringify(arAllData)+"&new="+JSON.stringify(arNewData)+"&get="+JSON.stringify(e),success:function(e){s.html(e),$("body .select2-container--default.select2-container--open").remove(),$(u).select2();setInterval(function(){n()},100);l.hide();setInterval(function(){i()},500)}})}function n(){$("*").is(".filter-cities .select2")&&($(".filter-cities .pse__filter-content").addClass("active"),clearInterval(h))}function i(){var t=document.location.pathname+document.location.search;t!==f&&(f=t,e(!1,t))}var a="/searchempl",s=$("#F1Filter"),o=$("#content"),l=$(".pse__veil"),r="#pse-seo-h1",c="#pse-seo-text",u="#pse-cities",f=document.location.pathname+document.location.search,p=setInterval(function(){i()},500);$(u).select2(),s.on("change",u,function(){e()});var h=setInterval(function(){n()},100);s.on("change",".filter-type input",function(){var t=$(".filter-type input");if($(this).is(t[0]))if($(this).is(":checked"))for(n=1;n<t.length;n++)$(t[n]).prop("checked",!0);else for(var n=1;n<t.length;n++)$(t[n]).prop("checked",!1);setTimeout(function(){e()},300)}),$(document).click(function(t){if($(t.target).hasClass("pse__filter-btn"))setTimeout(function(){e()},300);else if($(t.target).hasClass("pse__filter-name")){var n=$(t.target);n.hasClass("opened")?(n.siblings(".pse__filter-content").slideUp(200),setTimeout(function(){n.removeClass("opened"),n.siblings(".pse__filter-content").removeClass("opened")},200)):(n.addClass("opened"),n.siblings(".pse__filter-content").slideDown(500),n.siblings(".pse__filter-content").addClass("opened"))}}),$("#content").on("click",".paging-wrapp a",function(t){e(t)});var $f=$('#F1Filter');$(window).on('load resize',function(){if($(window).width()<'768')$('.pse__filter-vis').hasClass('active')?$f.show():$f.hide();else $f.show()});$('.pse__filter-vis').click(function(){$(this).hasClass('active')?$f.fadeOut():$f.fadeIn();$(this).toggleClass('active')})});