function _t(t){return Localization.translate(t)}var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},MainConfig=function(){function t(){}return t.SITE="",t.AJAX_GET_VE_GET_CITIES="/ajaxvacedit/vegetcities/",t.AJAX_GET_VE_CITY_BLOCK_DATA="/ajaxvacedit/getvecityblockdata/",t.AJAX_GET_VE_LOCATION_DATA="/ajaxvacedit/getvelocationdata/",t.AJAX_GET_CITYES="/ajax/getcities/",t.AJAX_GET_METRO="/ajax/getmetro/",t.AJAX_GET_GETEMPLCONTACTS="/ajax/getemplcontacts",t.AJAX_GET_GETEMPLRATE="/ajax/getemplrate",t.AJAX_GET_GETUSERMESAGES="/ajax/getusermesages",t.AJAX_GET_GETNEWMESAGES="/ajax/getnewmesages",t.AJAX_GET_GETSERVICE="/ajax/getservice",t.AJAX_GET_GETUSERNEWMESSAGES="/ajnotify/getusernewmessages",t.AJAX_GET_GETUSERNEWCOMMENTS="/ajnotify/getusernewcomments",t.AJAX_GET_GETVACANCIES="/ajresponse/getvacancies",t.AJAX_POST_VE_CITY_DELETE_BLOCK="/ajaxvacedit/delvecityblock/",t.AJAX_POST_VE_LOCATION_DELETE="/ajaxvacedit/delvelocation/",t.AJAX_POST_CITY_DATA="/ajaxvacedit/citydatasave/",t.AJAX_POST_LOCATION_DATA="/ajaxvacedit/locationdatasave/",t.AJAX_POST_GETVACS="/ajax/getvacs/",t.AJAX_POST_GETEMPLS="/ajax/getempls/",t.AJAX_POST_GETAPPLIC="/ajax/getapplic/",t.AJAX_POST_GETSEARCHVACS="/ajax/getsearchvacs/",t.AJAX_POST_SETVACATIONRESPONSE="/ajax/setvacationresponse/",t.AJAX_POST_SETRESPONSESTATUS="/ajax/setresponsestatus/",t.AJAX_POST_SENDUSERMESAGES="/ajax/sendusermesages/",t.AJAX_POST_CREATESERVICEORDER="/ajax/createServiceOrder/",t.AJAX_POST_POSTLOGOFILE="/ajax/postlogofile/",t.AJAX_POST_CROPLOGO="/ajax/croplogo/",t.AJAX_POST_UPLOADUNI="/ajax/uploaduni/",t.AJAX_POST_UPLOADUNI_EX="/ajax/uploaduniex/",t.AJAX_POST_INVITE="/ajresponse/invite",t.PAGE_USER_PROFILE="/user/profile",t.PAGE_PROFILE_COMMON="/site/ankety",t.PAGE_SEARCH_PROMO="/ankety",t.PAGE_SEARCH_EMPL="/searchempl",t.PAGE_SEARCH_VAC="/vacancy",t.PAGE_VACANCY="user/vacancies/",t.PAGE_IM="user/im",t.PATH_PIC="/theme/pic/",t.AJAX_GET_SHOW_MESS="/ajax/showmobmessage",t}(),CommFuncs=function(){function t(){}return t.merge=function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n},t.parseUrl=function(){for(var t={},e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(void 0===t[i[0]])t[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof t[i[0]]){var o=[t[i[0]],decodeURIComponent(i[1])];t[i[0]]=o}else t[i[0]].push(decodeURIComponent(i[1]))}return t},t.inArray=function(t,e,n){void 0===n&&(n=!1);var i,o=!1,n=!!n;for(i in e)if(n&&e[i]===t||!n&&e[i]==t){o=!0;break}return o},t.scrollTo=function(){var t=1;t=$("*").is("a[name=smth]")?$("a[name=smth]").offset().top:1,$("body").stop().animate({scrollTop:t-20+"px"},500)},t.base64Encode=function(t){var e,n,i,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,c="";do{e=(a=t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<8|t.charCodeAt(r++))>>18&63,n=a>>12&63,i=a>>6&63,o=63&a,c+=s.charAt(e)+s.charAt(n)+s.charAt(i)+s.charAt(o)}while(r<t.length);switch(t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c},t.clone=function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t}(),HiddenText=function(){function t(t){this.openText="",this.closeText="",this.hiddPic="";var e=this,n={openBtnClass:"look-full",doNotClose:!1};$.extend(n,t),t=n,e.options=t,e.openText=t.openText,e.closeText=t.closeText,e.hiddPic=t.hiddenImg,e.wrappObj=t.wrappObj,e.contentObj=t.contentObj,e.wrappObj.append('<div class="hidden-text"></div>'),e.wrappObj.append('<div class="'+e.options.openBtnClass+'"><a href="#">'+e.openText+"</a></div>"),e.wrappObj.find("."+e.options.openBtnClass+" a").click(function(t){e.onShowFullTextClickFn(t,this)})}return t.init=function(e){t.wrapper=e.wrapper,t.content=e.content,$(t.wrapper).each(function(n){var i=$(this);e.contentObj=i.find(t.content),i.height()<e.contentObj.height()&&(e.wrappObj=i,new t(e))})},t.prototype.onShowFullTextClickFn=function(t,e){var n=this;t.preventDefault();var i=n.contentObj.height(),o=n.wrappObj,a=o.height();if(o.data("opened")){o.find(".hidden-text").fadeIn(400);var s=o.data("opened");o.animate({height:"-="+(a-s)},300,function(){o.css({maxHeight:"",height:""}).removeAttr("data-opened").removeData("opened"),o.find("."+n.options.openBtnClass).removeClass("-opened").css({position:""}),o.find("."+n.options.openBtnClass+" a").text(n.openText)})}else o.animate({maxHeight:i},300,function(){o.css({maxHeight:"none"}).attr("data-opened",a),o.find(".hidden-text").fadeOut(200),o.find("."+n.options.openBtnClass).addClass("-opened").css({position:"static"});var t=o.find("."+n.options.openBtnClass+" a");t.text(n.closeText),n.options.doNotClose&&t.fadeOut(200)})},t.wrapper="",t.content="",t}(),ModalWindow=function(){function t(e){this.context="#DiContent",this.props={},this.defProps={};var n=this,i={action:{active:1,btnTitle:"OK",onClick:""},getContent:"",content:"",afterOpen:"",afterClose:"",bgIsCloseBtn:1,position:"fixed",context:"#DiContent"};n.defProps=i,e=n.setProps(e),n.context=e.context,t.winObj=n;var o=$('<div id="MWwrapper"></div>');o.prependTo(n.context),$('<div class="mw-bg"></div>').appendTo("#MWwrapper"),$('<div class="mw-win"><div class="loading"><i></i></div><a href="#" class="mw-close"></a><div class="header-block"></div><div class="mw-content"></div></div>').appendTo("#MWwrapper"),$("#MWwrapper .mw-close").click(function(t){n.onCloseFn(t)}),$(".mw-closed").click(function(t){n.onCloseFn(t)}),$("#MWwrapper .mw-bg").click(function(t){n.onCloseFn(t,1)}),n.winDOM=o,t.content=o.find(".mw-content")}return t.open=function(e){t.winObj||new t(CommFuncs.clone(e)),t.winObj.onOpenFn(e)},t.close=function(e){t.winObj||new t,t.winObj.onCloseFn(e)},t.redraw=function(e){t.winObj||new t(CommFuncs.clone(e)),t.winObj.onRedrawFn(e),e.afterRedraw&&e.afterRedraw()},t.moveCenter=function(e){t.winObj||new t,t.winObj.onMoveCenter(e)},t.show=function(e){t.winObj||new t,t.winObj.onShow(e)},t.hide=function(e){t.winObj||new t,t.winObj.onHide(e)},t.loadingOn=function(){t.winObj&&t.winObj.winDOM.find(".loading").fadeIn(200)},t.loadingOff=function(){t.winObj&&t.winObj.winDOM.find(".loading").fadeOut(200)},t.prototype.onCloseFn=function(t,e){void 0===e&&(e=0);var n=this;t&&t.preventDefault(),e&&!n.props.bgIsCloseBtn||($("#MWwrapper .mw-bg").fadeOut(200),$("#MWwrapper .mw-win").fadeOut(400)),n.props.afterClose&&n.props.afterClose()},t.prototype.onOpenFn=function(t){var e=this;t=e.setProps(t),$("#MWwrapper .loading").fadeIn(400);var n=$("#MWwrapper .mw-bg"),i=$("#MWwrapper .mw-win");if(void 0!=t.additionalStyle?i.removeClass().addClass("mw-win "+t.additionalStyle):i.removeClass().addClass("mw-win"),e.createBtn(t),t&&t.getContent)$.get(t.getContent,function(o){i.children(".mw-content").empty().append($(o)),$(window).width()<i.outerWidth()&&i.css({width:$(window).width()-20}),e.onMoveCenter(),n.fadeIn(400),i.fadeIn(400),t.afterOpen&&t.afterOpen(),$("#MWwrapper .loading").fadeOut(200)}).always(function(){});else if(t&&t.content){var o=i.find(".header-block");o.empty(),t.content&&$(t.content).data("header")&&o.append("<div class='header'><div>".concat($(t.content).data("header"),"</div></div>")),t.content&&$(t.content).data("title")&&o.append("<div class='header2'>".concat($(t.content).data("title"),"</div>")),i.children(".mw-content").empty().append($(t.content)),$(window).width()<i.outerWidth()&&i.css({width:$(window).width()-20}),e.onMoveCenter(),n.fadeIn(400),i.fadeIn(400),t.afterOpen&&t.afterOpen(),$("#MWwrapper .loading").fadeOut(200)}},t.prototype.onRedrawFn=function(t){var e=this,n=(t=e.setProps(t)).content,i=($("#MWwrapper .mw-bg"),$("#MWwrapper .mw-win"));e.createBtn(t),i.children(".mw-content").empty().append(n),"absolute"==t.position?i.css({top:($(window).outerHeight()-i.outerHeight())/2,margin:"".concat("0 0 0 -",""+i.width()/2,"px"),position:"absolute"}):i.css({margin:"-".concat(""+i.height()/2,"px 0 0 -",""+i.width()/2,"px")}),e.winDOM.find(".loading").fadeOut(200)},t.prototype.onMoveCenter=function(t){var e=this,n=e.winDOM.find(".mw-win");e.winDOM.find(".mw-info");if("absolute"==e.props.position){var i=($(window).outerHeight()-n.outerHeight())/2;$(window).outerHeight()<n.outerHeight()&&(i=0),n.css({top:i,margin:"".concat("20px 10px 20px -","10","px"),width:"50%",left:"26%",position:"absolute"})}else n.css({margin:"-".concat(""+n.height()/2,"px 0 0 -",""+n.outerWidth()/2,"px"),left:"50%"})},t.prototype.onShow=function(t){this.winDOM.find(".mw-win").fadeIn(200)},t.prototype.onHide=function(t){this.winDOM.find(".mw-win").fadeOut(200)},t.prototype.createBtn=function(t){var e=this,n=t;if(n.action.active){var i=e.winDOM.find(".button-action");if(i.off("click"),i.remove(),$('<div class="button-action"><button>'+n.action.btnTitle+"</button></div>").appendTo(e.winDOM.find(".mw-win")),n.action.onClick)o=n.action.onClick;else var o=function(t){e.onCloseFn(t)};$("#MWwrapper .button-action").click(o)}},t.prototype.setProps=function(t){var e=this,n=CommFuncs.clone(e.defProps);n.action=CommFuncs.clone(e.defProps.action);var i=t;return $.extend(n.action,i.action),delete i.action,$.extend(n,i),e.props=n,e.props},t}(),FormFilters=function(){function t(){}return t.prototype.bindFiltersFn=function(t){var e=this;if((t=$(t))&&t.length)n=t.find("[data-field-filter]");else var n=$("[data-field-filter]");n.keypress(function(t){e.onKeyPressFilterFn(t,this)})},t.prototype.onKeyPressFilterFn=function(t,e){var n=$(e),i=n.data("field-filter").split(";"),o={};for(var a in i){i[a]=i[a].replace("\\:","|||");var s=i[a].split(":",2);s[1].length&&(s[1]=s[1].replace("|||",":")),o[s[0]]=s[1]?s[1]:""}for(var a in o)if("digits"==a){var r=o[a];if(t.which<48||t.which>57){if(r&&-1!==$.inArray(String.fromCharCode(t.which),r.split(""))||-1!==$.inArray(t.keyCode,[8,9,46,36,35,37,39]))return 1;t.preventDefault()}}else if("max"==a&&n.val().length>=o[a]){if(e.selectionStart!=e.selectionEnd)return 1;t.preventDefault()}},t}(),FormCheckers=function(){function t(){this.FLAG_STOP=0,this.errBoxObj=0,this.addErrClass="",this.waitTimeErrorMess=0,this.customCheckers={},this.options={},this.filters={},this.T1wait=0;var t=this;t.options={name:"",elem:!1,message:"",wait:0},t.filters=[["empty","max","multi","email","if","password","notonlydigits","custom"],["filterEmpty","filterMax","filterMulti","filterEmail","filterIf","filterPassword","filterNotonlydigits","filterCustom"]]}return t.prototype.FormSubmit=function(t){return this.onFormSubmit(t.event,t.form,t.justReturn)},t.prototype.addCheckerCustom=function(t,e){this.customCheckers[t]=e},t.prototype.onFormSubmit=function(t,e,n){t.preventDefault();var i=this;e=$(e);var o=null,a=null,s=0;return $(e).find("[data-field-check]:not(.nocheck)").each(function(){i.options.message="",o=i.options.elem=$(this),a=o.val();var t=o.data("field-check").split(","),e={};for(var n in t){var r=t[n].split(":");e[r[0]]=!r[1]||r[1]}for(var c in e)i.setOptions(c,e[c]);for(var c in e){var l;if((l=$.inArray(c,i.filters[0]))>-1){var p=i.filters[1][l];if(s=i[p]({filterVal:e[c],item:o,itemVal:a}))break}}if(s)return!1}),s?(o=i.options.elem,i.FLAG_STOP=1,!1):!!n||(e.off("submit").submit(),!0)},t.prototype.setOptions=function(t,e){var n=this;"name"==t?n.options.name=e:"elem"==t?n.options.elem=$(e):"message"==t?n.options.message=e:"wait"==t&&(n.options.wait=e)},t.prototype.filterEmpty=function(t){var e=this,n=0;return""==t.itemVal&&(n=1,e.options.message='Необходимо заполнить поле "'+e.options.name+'"'),n},t.prototype.filterMax=function(t){var e=this;return t.itemVal.length>t.filterVal&&(e.options.message='Поле "'+e.options.name+'" не должно превышать '+t.filterVal+" символов",!0)},t.prototype.filterMulti=function(t){var e=this;return(!t.itemVal||t.itemVal.length<1)&&(e.options.message='Выберите значение в поле "'+e.options.name+'"',e.options.elem=e.options.elem.next(".ms-parent"),!0)},t.prototype.filterEmail=function(t){var e=this;return!new RegExp("^[^@]+@[^.]+.[^.^@]{2,}[^@]*$","").test(t.itemVal)&&(e.options.message='Введите правильный e-mail адрес в поле "'+e.options.name+'"',!0)},t.prototype.filterIf=function(t){return t.itemVal==t.filterVal},t.prototype.filterPassword=function(t){var e=this;return t.itemVal!=$(t.filterVal).val()&&(e.options.message="Пароль и его повторение не совпадают",!0)},t.prototype.filterNotonlydigits=function(t){var e=this;return!new RegExp("([A-ZА-Я]+)").test(t.itemVal)&&(e.options.message||(e.options.message='Поле "'+e.options.name+'" должно содержать не только цифры'),!0)},t.prototype.filterCustom=function(t){return this.customCheckers[t.filterVal]({value:t.itemVal})},t}(),DDMultiAjax=function(){function t(t,e){this.ajaxRetData={},this.selectObj={},this.selfObj={},this.loadObj={},this.options={ajaxParams:{}},this.vT1=0,this.afterItemSelectedFn=0;var n=this,i={ajaxParams:{inputName:"",url:"",addParams:{}},insertAllow:0,width:280,insertFirst:0,loadingGIF:MainConfig.PATH_PIC+"loading2.gif",labelText:"Chose smth",btnAddHint:"",afterItemSelected:null};$.extend(i.ajaxParams,e.ajaxParams),$.extend(i,e),e=i,n.options=e,n.selectObj=$(t),$('<div id="DiLoadingDDMA"><img src="'+n.options.loadingGIF+'" alt=""></div>').appendTo("body"),n.loadObj=$("#DiLoadingDDMA"),n.init()}return t.prototype.setAjaxParam=function(t,e){var n=this;return n.options.ajaxParams.addParams[t]=e,n},t.prototype.clear=function(){this.selfObj.find(".choices").empty()},t.prototype.setWidth=function(t){var e=this,n=e.selfObj,i=e.options.width=t;i&&(n.find(".dropdown-block").css({margin:"0 0 0 "+(30-i+5)+"px",width:i+"px"}),n.find(".dropdown").css({width:i-12+"px"}),n.find("input.noinsert").css({width:i-12+"px"}))},t.prototype.init=function(){var t=this;if(t.options.insertAllow)e='<input type="text" class="edit"/><a href="#" class="ok" title="Добавить в список"></a>';else var e='<input type="text" class="edit noinsert"/>';var n=t.selfObj=t.selectObj.after('<div class="dropdown-multi"><a href="#" class="add-btn" title="'+t.options.btnAddHint+'"></a><div class="dropdown-block"><label for="">'+t.options.labelText+"</label>"+e+'<div class="dropdown"><div class="title"></div><div class="close">x</div><div class="choices"></div></div></div></div>').next();t.setWidth(t.options.width),n.find(".add-btn").click(function(e){t.onAddBtnCLickFn(e,this)}),n.find("input.edit").keypress(function(t){return!(13==t.which)}).keyup(function(e){return t.onEditKeyPressFn(e,this)}).blur(function(e){t.onEditBlurFn(e,this)}),n.find(".ok").click(function(e){t.onOkBtnClickFn(e,this)}),n.find(".close").click(function(e){t.closeFn()})},t.prototype.onAddBtnCLickFn=function(t,e){var n=this,i=$(e);t.preventDefault(),i.toggleClass("opened"),n.selfObj.find(".dropdown-block").slideToggle(300).find("input").focus().select()},t.prototype.onEditBlurFn=function(t,e){var n=this;setTimeout(function(){$(e);n.closeFn()},300)},t.prototype.onEditKeyPressFn=function(t,e){t=t||event;var n=this,i=$(e),o=n.selfObj,a=o.find(".dropdown").stop().slideDown(300),s=o.find(".choices");clearTimeout(n.vT1),n.vT1=setTimeout(function(){n.showLoadingFn(i,1);var t={};t[n.options.ajaxParams.inputName]=i.val();for(var e in n.options.ajaxParams.addParams){var r=n.options.ajaxParams.addParams[e];t[e]=r}$.get(n.options.ajaxParams.url,t,function(t){t=JSON.parse(t),n.ajaxRetData=t,n.options.insertFirst,s.empty();for(var e in t)$("<a href='#' class='item'".concat(" data-name='",t[e].name,"' data-id='",t[e].id,"'>",t[e].name,"</a>")).appendTo(s);t.length<1?n.options.insertAllow?a.stop().slideUp(200):o.find(".title").text("Не найдено совпадений"):(o.find(".title").text(""),a.css({height:""}).slideDown(300)),a.find(".item").click(function(t){n.onDLItemCLickFn(t,this)})}).always(function(){n.hideLoadingFn()})},500)},t.prototype.closeFn=function(){var t=this;t.selfObj.find(".dropdown-block").slideUp(200),t.selfObj.find(".add-btn").removeClass("opened")},t.prototype.showLoadingFn=function(t,e){var n=this,i=n.loadObj;if(i.find("img").attr("src",n.options.loadingGIF),e){var o=1;o=$("*").is(t)?t.offset().top:1,i.css({left:t.offset().left+t.width()-i.width()-20,top:o+parseInt((t.outerHeight()-i.outerHeight())/2)-1})}i.fadeIn(400)},t.prototype.hideLoadingFn=function(){this.loadObj.fadeOut(400)},t.prototype.onDLItemCLickFn=function(t,e){var n=this,i=$(e);t.preventDefault(),i.closest(".dropdown-block").find("input").val(i.text());if(o=n.findAddedCity(i.text()))o.prop("selected",!0),o.parent().multipleSelect("refresh");else{var o=$("<option value='".concat(i.data("id"),"' selected>",i.text(),"</option>"));if(n.options.insertFirst>0){var a=n.selectObj.find("option");a.length>=n.options.insertFirst?n.options.insertFirst<2?o.prependTo(n.selectObj):$(a[n.options.insertFirst-2]).after(o):o.appendTo(n.selectObj)}else o.appendTo(n.selectObj);n.selectObj.multipleSelect("refresh")}n.closeFn(),""!=n.options.afterItemSelected&&n.options.afterItemSelected([i.data("id"),i.text()])},t.prototype.findAddedCity=function(t){return this.selectObj.find("option").each(function(){var e=$(this);if(e.text().toUpperCase()==t.toUpperCase())return e}),0},t.prototype.onOkBtnClickFn=function(t,e){var n=this,i=($(e),n.selfObj),o=i.find("[type=text]");t.preventDefault();var a=0;i.find(".item").each(function(){var t=$(this);t.data("name").toUpperCase()==o.val().toUpperCase()&&(a=t.data("id"))}),n.findAddedCity(o.val())||n.selectObj.prepend("<option value='".concat(a||o.val(),"' selected>",o.val(),"</option>")).multipleSelect("refresh"),n.closeFn()},t}(),Uploaduni=function(){function t(){}return t.prototype.init=function(t){var e=this,n={scope:"",imgsWrapper:"",filesWrapper:"",imgBlockTmpl:"",filesBlockTmpl:"",lnktoimg:"",uploadForm:"",uploadConnector:"",messageBlock:"",loadingBLock:"",onDeleteEnd:""};$.extend(n,t),t=n,e.props=t,$(e.props.imgsWrapper).find(".uni-delete").click(function(t){e.onFileDelete(t,this)}),e.props.filesWrapper&&$(e.props.filesWrapper+", "+e.props.imgsWrapper).find(".uni-del").click(function(t){e.onFileDeleteEx(t,this)})},t.prototype.upload=function(t){this.onStartUpload(t)},t.prototype.uploadEx=function(t){if(!t||t&&!t.uploadInput)return!1;var e=this,n=$(t.uploadInput);if(t.uploadInput.files[0]){var i=n.closest("form");i.find(e.props.loadingBLock).fadeIn(400);var o=new FormData(i[0]);o.set("fn",n.attr("name")),o.set("sc",e.props.scope),o.set("meta",CommFuncs.base64Encode(JSON.stringify(t.meta))),o.set("op","1"),$.ajax({url:e.props.uploadConnector,type:"POST",success:function(n){var o=0,a=_t("fileLoad");try{if((n=JSON.parse(n)).error<0)throw n.ret&&console.warn("ret",n.ret),o=n.error,new Error(n.message);if(100==n.error)if(e.files=n.files,t.onAfterUpload&&(n=t.onAfterUpload(n)),"images"==n.file.meta.type){var s=$("."+e.props.imgBlockTmpl).clone();s.find(".uni-img").attr("src",n.file.files.tb),n.file.files.orig&&s.find(".uni-img-link").attr("href",n.file.files.orig),s.find(".uni-del").attr("data-id",n.id).click(function(t){e.onFileDelete(t,this)}),s.hide().removeClass("tmpl "+e.props.imgBlockTmpl).addClass("uni-img-block"),$(e.props.imgsWrapper).append(s),s.slideDown(400)}else{var r=$("."+e.props.filesBlockTmpl).clone();r.removeClass("tmpl"),n.file.files.orig&&r.find(".uni-link").attr("href",n.file.files.orig),r.find(".uni-link").text(n.file.meta.name),r.find(".uni-del").attr("data-id",n.id).click(function(t){e.onFileDelete(t,this)});var c=n.file.files.orig.substr(n.file.files.orig.lastIndexOf(".")+1);r.addClass("-"+c).hide().removeClass(e.props.filesBlockTmpl).addClass("uni-file-block"),$(e.props.filesWrapper).append(r),r.slideDown(400)}t.onSuccessEnd&&t.onSuccessEnd(s||r)}catch(t){var l=o;0!==l&&(a=t.message),o=1}o&&(e.props.messageBlock&&i.find(e.props.messageBlock).text(a),console.warn("E",l))},error:function(){i.find(".message").text(_t("fileLoad"))},data:o,cache:!1,contentType:!1,processData:!1},"json").always(function(){i.find(".loading-ico").fadeOut(200)})}},t.prototype.getFiles=function(){return this.files},t.prototype.setFiles=function(t){this.files=t},t.prototype.onStartUpload=function(t){var e=this,n=$(t);if(t.files[0]){var i=n.closest("form");i.find(e.props.loadingBLock).fadeIn(400);var o=new FormData(i[0]);o.set("fn",n.attr("name")),o.set("sc",e.props.scope),o.set("op","1"),$.ajax({url:e.props.uploadConnector,type:"POST",success:function(t){if((t=JSON.parse(t)).error)e.props.messageBlock&&i.find(e.props.messageBlock).text(t.message),t.ret&&console.log("ret",t.ret);else{e.files=t.files;var n=$("."+e.props.imgBlockTmpl).clone();n.find(".uni-img").attr("src",t.file.tb),t.file.orig&&n.find(".uni-img-link").attr("href",t.file.orig),n.find(".uni-delete").attr("data-id",t.id).click(function(t){e.onFileDelete(t,this)}),n.hide().removeClass(e.props.imgBlockTmpl).addClass("uni-img-block"),$(e.props.imgsWrapper).append(n),n.slideDown(400)}},error:function(){i.find(".message").text("Ошибка загрузки файла, обновите страницу и попробуйте еще раз")},data:o,cache:!1,contentType:!1,processData:!1},"json").always(function(){i.find(".loading-ico").fadeOut(200)})}},t.prototype.onFileDelete=function(t,e){var n=this,i=$(e),o=i.closest("form"),a=i.data("id"),s=new FormData(o[0]);s.set("id",a),s.set("op","2"),$.ajax({url:n.props.uploadConnector,type:"POST",success:function(t){var e=0,s=_t("fileDeleteError");try{if((t=JSON.parse(t)).error<0)throw n.props.messageBlock&&o.find(n.props.messageBlock).text(t.message),{message:t.message,code:t.error};100==t.error?i.closest(n.props.imgsWrapper).find("[data-id="+a+"]").closest(".uni-img-block").slideUp(200,function(){$(this).remove()}):e=1}catch(t){var r=t.code;void 0!=r&&(s=t.message),e=1}e&&(n.props.messageBlock&&o.find(n.props.messageBlock).text(s),r&&console.warn("E",r))},error:function(){o.find(".message").text(_t("fileDeleteError"))},data:s,cache:!1,contentType:!1,processData:!1},"json").always(function(){o.find(".loading-ico").fadeOut(200)})},t.prototype.onFileDeleteEx=function(t,e){var n=this,i=$(e),o=i.closest("form"),a=i.data("id"),s=new FormData(o[0]);s.set("id",a),s.set("op","2"),$.ajax({url:n.props.uploadConnector,type:"POST",success:function(t){var e=0,s=_t("fileDeleteError");try{if((t=JSON.parse(t)).error<0)throw n.props.messageBlock&&o.find(n.props.messageBlock).text(t.message),{message:t.message,code:t.error};100==t.error?i.closest(n.props.imgsWrapper+", "+n.props.filesWrapper).find("[data-id="+a+"]").closest(".uni-img-block").slideUp(200,function(){$(this).remove(),n.props.onDeleteEnd&&n.props.onDeleteEnd()}):e=1}catch(t){var r=t.code;void 0!=r&&(s=t.message),e=1}e&&(n.props.messageBlock&&o.find(n.props.messageBlock).text(s),r&&console.warn("E",r))},error:function(){o.find(".message").text(_t("fileDeleteError"))},data:s,cache:!1,contentType:!1,processData:!1},"json").always(function(){o.find(".loading-ico").fadeOut(200)})},t}(),Hinter=function(){function t(){}return t.prototype.init=function(){},t.bind=function(t,e){void 0===e&&(e={});var n={side:"bottom",animation:"fade"},i=this.options;this.hintSide[e.side]&&(n.side=this.hintSide[e.side]),this.hintAnimation[e.animation]&&(n.animation=this.hintAnimation[e.animation]),$.extend(i,n),$(t).tooltipster(i)},t.hintSide={top:"top",bottom:"bottom",right:"right",left:"left"},t.hintAnimation={fade:"fade",swing:"swing"},t.options={side:"bottom",theme:["tooltipster-noir","tooltipster-noir-customized"],animation:"fade"},t}(),CommentAdditor=function(){function t(){this.formAction=""}return t.prototype.open=function(t){var e=this;e.formAction=t.formAction,e.FormChecker||(e.FormChecker=new FormCheckers),ModalWindow.open({getContent:t.getUrl,afterOpen:function(){e.onAfterOpen()}})},t.prototype.onAfterOpen=function(){var t=this;G_VARS.App.applyRadios("#MWwrapper"),G_VARS.App.applyCounterMemo("#MWwrapper"),$("#MWwrapper #EdName").focus(),$("#MWwrapper form").submit(function(e){if($("#MWwrapper .loading").fadeIn(400),t.FormChecker.FormSubmit({event:e,form:"#MWwrapper form",justReturn:1})){$("#BtnAddComment button").attr("type","button");var n=$(this).serialize();$.post(t.formAction,n,function(e){ModalWindow.redraw({content:$(e),afterRedraw:function(){t.onAfterRedraw()}})})}else $("#MWwrapper .loading").fadeOut(200)})},t.prototype.onAfterRedraw=function(){$("#BtnOk a").click(function(t){ModalWindow.close(t)}),$("#MWwrapper .loading").fadeOut(200)},t}(),IndServ=function(){function t(){this.customProps={}}return t.prototype.init=function(){var t=this,e=".empty-search-result";sbjs.init({domain:MainConfig.SITE,lifetime:3,callback:function(e){t.doSmth(e)}}),$(".about__look-full a").click(function(e){t.onShowFullTextClickFn(e)}),$("a.enter__register-link").click(function(e){return t.stopLinkFn(e)}),$(".enter__user").removeClass("-autohover").find("a.um").click(function(e){return t.onUserMenuClickFn(e,this)}).blur(function(e){return t.onUserMenuClickFn(e,this,1)}),$(".top-menu-wr").removeClass("-autopopup").find("a.menu").click(function(e){return t.onTopMenuClickFn(e,this)}).blur(function(e){return t.onTopMenuClickFn(e,this,1)}),$(".nofirst").click(function(){t.dropDropBoxFirstItemFn(this)}),t.applyCheckbox(".checkbox-box input[type=checkbox], .checkbox-box-sm input[type=checkbox]"),t.applyRadios(""),t.applyCounterMemo(""),$(".memo-hint-box button").click(function(){t.onMemoHintBoxBtnClick(this)}),$(".memo-hint-box button").blur(function(){t.onMemoHintBoxBtnClick(this,1)}),Hinter.bind(".js-g-hashint.-js-g-hintleft",{side:"left"}),Hinter.bind(".js-g-hashint.-js-g-hintright",{side:"right"}),Hinter.bind(".js-g-hashint");var n=0;if($(".vacancy.premium .border").each(function(){var t=$(this);t.outerHeight()>n&&(n=t.outerHeight())}).each(function(){$(this).css({minHeight:n+"px"})}),"index"==G_PAGE){var i={url:function(t){return 1==$("#CBvacancy").val()?MainConfig.AJAX_POST_GETSEARCHVACS+"?search="+t:2==$("#CBvacancy").val()?MainConfig.AJAX_POST_GETAPPLIC+"?search="+t:MainConfig.AJAX_POST_GETEMPLS+"?search="+t},getValue:"name",ajaxSettings:{dataType:"json",method:"POST",data:{dataType:"json"}},preparePostData:function(t){return t.phrase=$("#EdSearch").val().trim(),t},requestDelay:1e3,list:{onChooseEvent:function(){t.onAutocompleteFn()},onShowListEvent:function(){$("*").is(e)&&$(e).remove()},onLoadEvent:function(){var t=$(".easy-autocomplete-container");t.find(".eac-item").length||($("*").is(e)?$(e).addClass("active"):t.append("<div class='empty-search-result active'>Ничего не найдено</div>"))}}};$("#EdSearch").easyAutocomplete(i)}var o=null,a=null;$(window).on("load resize",function(t){var e=$(window).width(),n=$("#DiEmplSlider"),i=$("#DiEmpl1Slider");props={navigation:!0,slideSpeed:300,pagination:!0,paginationSpeed:400,singleItem:!0,autoPlay:!0,autoplaySpeed:300,autoplayTimeout:2e3,stopOnHover:!0,navigationText:["",""]},e>=751?((n.hasClass("off")||"load"==t.type)&&(props.singleItem=!1,props.items=6,props.itemsDesktop=[1182,4],props.itemsDesktopSmall=!1,props.itemsTablet=[974,3],props.itemsTabletSmall=!1,n.owlCarousel(props),n.removeClass("off"),o=n.data("owlCarousel")),(i.hasClass("off")||"load"==t.type)&&(props.singleItem=!1,props.items=6,props.itemsDesktop=[1182,4],props.itemsDesktopSmall=!1,props.itemsTablet=[974,3],props.itemsTabletSmall=!1,i.owlCarousel(props),i.removeClass("off"),a=i.data("owlCarousel"))):(n.hasClass("off")||(void 0!==o&&null!=o&&o.destroy(),n.addClass("off")),i.hasClass("off")||(void 0!==a&&null!=a&&a.destroy(),i.addClass("off")))}),$(".search-category").click(function(e){$.each($(".search-category"),function(t){$(this).removeClass("active")}),$(this).addClass("active"),$("#CBvacancy").val($(this).data("val")),t.onChangeSearchTypeFn(e,$("#CBvacancy")),3==$(this).data("val")?$(".search__wrd-module").addClass("disable"):$(".search__wrd-module").removeClass("disable")}),$(".search-word").click(function(t){$("#EdSearch").val($(this).text().trim()),$("*").is(e)&&$(e).remove()}),$("#EdSearch").focusin(function(){$("*").is(e)&&(""!=$(this).val()?$(e).addClass("active"):$(e).removeClass("active"))}),$("#EdSearch").focusout(function(){$("*").is(e)&&$(e).removeClass("active")}),(new PushChecker).init()},t.prototype.applyCityBox=function(){var t=this;$(".city-box [type=text]").keyup(function(e){t.onEdCityChangeFn(e,this)}),$(".city-box [type=text]").blur(function(){var t=$(this);setTimeout(function(){t.closest(".city-box").find(".dropdown").fadeOut(100)},200)}),$(".city-box .dropdown").hide(),$(".city-block .btn-close").click(function(t){t.preventDefault(),$(".city-block").length<3&&($("#CB1country").slideDown(200),$("#EdCountry").slideUp(200),$("#HiAddedCity").val("0"))})},t.prototype.onEdCityChangeFn=function(t,e){var n=this,i=$(e),o=i.closest(".city-box"),a=o.find(".choices");G_VARS.App.country&&(clearTimeout(n.vT1City),n.vT1City=setTimeout(function(){G_VARS.App.showLoading(i,1),$.get(MainConfig.AJAX_GET_CITYES,{filter:$(e).val(),idco:G_VARS.App.country,limit:20},function(t){t=JSON.parse(t),a.empty();for(var e in t){var s="1"==t[e].ismetro?"data-id='".concat(t[e].id_city,"'"):"";$("<a href='#' class='item' ".concat(s,", data-name='",t[e].name,"'>",t[e].name,"</a>")).appendTo(a)}var r=o.find(".dropdown");r.width(i.outerWidth()).fadeIn(300),r.find(".item").click(function(t){n.onCBCityClickFn(t,this)})}).always(function(){G_VARS.App.hideLoading()})},300))},t.prototype.applyMetroHTML=function(t,e){this.onCBCityClickFn(0,t,e)},t.prototype.onCBCityClickFn=function(t,e,n){var i=$(e),o=i.closest(".city-box"),a=o.closest(".city-block").find(".metro-select"),s=a.find("select"),r=o.find(".EdCity");r.val(i.data("name")),t&&t.preventDefault();var c=n||i.data("id");c?(G_VARS.App.showLoading(r,1),$.get(MainConfig.AJAX_GET_METRO,{idcity:c},function(t){t=JSON.parse(t),s.empty();for(var e in t){var n="";G_VARS.userMetro&&G_VARS.userMetro[t[e].id]&&G_VARS.userMetro[t[e].id].idcity==c&&(n="selected"),$("<option value='".concat(t[e].id,"' ",n,">",t[e].name,"</option>")).appendTo(s)}a.slideDown(400),s.multipleSelect("refresh").hide(),s.next().css({width:r.outerWidth()})}).always(function(){G_VARS.App.hideLoading()})):(s.empty(),s.multipleSelect("refresh"),a.slideUp(200))},t.prototype.showLoading=function(t,e,n){var i=$("#DiLoading");if(n)var o=n.offsetLeft?n.offsetLeft:0,a=n.align?n.align:0;if(n&&n.pic)s=MainConfig.PATH_PIC+"loading"+n.pic+".gif";else var s=MainConfig.PATH_PIC+"loading2.gif";i.find("img").attr("src",s).one("load",function(){n&&2==n.variant&&i.addClass("wb");var s=1;s=$("*").is(t)?t.offset().top:1,i.css({top:s+parseInt((t.outerHeight()-i.outerHeight())/2)-1}),e?i.css({left:t.offset().left+t.width()-i.width()-20,top:s+parseInt((t.outerHeight()-i.outerHeight())/2)-1}):"center"==a?i.css({left:t.offset().left+(t.outerWidth()-i.outerWidth())/2}):i.css({left:t.offset().left+o,top:s+parseInt((t.outerHeight()-i.outerHeight())/2)-1}),n&&n.left&&i.css({left:t.offset().left+n.left}),n&&n.top&&i.css({top:s}),i.fadeIn(400)})},t.prototype.showLoading2=function(t,e){var n=$("#DiLoading"),i={align:"center",valign:"middle",pic:2,offsetX:0,offsetY:0,outerAlign:"",withBg:!1};t=$(t),$.extend(i,e),e=i;var o=MainConfig.PATH_PIC+"loading"+e.pic+".gif";n.find("img").attr("src",o).one("load",function(){"left"==e.outerAlign?n.css({left:t.offset().left-n.width()+e.offsetX}):"right"==e.align?n.css({left:t.offset().left+t.width()-n.width()+e.offsetX}):"center"==e.align?n.css({left:t.offset().left+(t.outerWidth()-n.outerWidth())/2}):"left"==e.align&&n.css({left:t.offset().left+e.offsetX});var i=1;i=$("*").is(t)?t.offset().top:1,"top"==e.valign?n.css({top:i+e.offsetY}):"middle"==e.valign&&n.css({top:i+parseInt((t.outerHeight()-n.height())/2)}),e.withBg?"1"==e.pic?n.addClass("wb-sq"):n.addClass("wb"):n.removeClass("wb wb-sq"),n.stop().fadeIn(400)})},t.prototype.hideLoading=function(){setTimeout(function(){$("#DiLoading").stop().fadeOut(400)},400)},t.prototype.applyCounterMemo=function(t){var e=this;$(t+" .memo-with-counter textarea").keyup(function(){e.onMemoKeyUpFn(this)})},t.prototype.applyRadios=function(t){var e=this,n=$("label.radio-box");$.each(n,function(){var t=$(this);t.find("input").eq(0).prop("checked")&&t.addClass("checked")}),$(t+" .radio-box input[type=radio]").change(function(){e.onRadioBoxChangeFn(this)})},t.prototype.applyCheckbox=function(t){var e=this;$(t).each(function(){var t=$(this),e=t.data("val"),n=e?e.split(":"):"";n.length>1?t.val()==n[0]&&(t.parent().addClass("checked"),t.prop("checked",!0)):t.parent().toggleClass("checked",t.is(":checked"))}),$(t).change(function(t,n){e.onChkboxChangeFn(this,n)})},t.prototype.onShowFullTextClickFn=function(t){$(".about__look-full");var e=$(".about__content").height();$(".about").animate({height:e},300,function(){$(".hidden-text").fadeOut(200),$(".about__look-full").fadeOut(200)}),t.preventDefault()},t.prototype.stopLinkFn=function(t){return t.preventDefault(),!1},t.prototype.dropDropBoxFirstItemFn=function(t){var e=$(t),n=$(t).children("option");return e.hasClass("nofirst")&&n[0].remove(),e.removeClass("nofirst"),!1},t.prototype.onChkboxChangeFn=function(t,e){var n=$(t),i=n.data("val"),o=i?i.split(":"):"";o.length>1?(n.prop("checked",!0),n.val()==o[1]?(n.parent().addClass("checked"),n.val(o[0])):(n.parent().removeClass("checked"),n.val(o[1]))):n.parent().toggleClass("checked",n.is(":checked")),!e&&n.trigger("customOnCheck")},t.prototype.onRadioBoxChangeFn=function(t){$(t).closest("div.radio-box").find(".checked").each(function(){$(this).removeClass("checked")}),$(t).parent().toggleClass("checked",$(t).is(":checked"))},t.prototype.onMemoKeyUpFn=function(t){var e=$(t),n=e.data("counter"),i=e.val().length>parseInt(n)?"".concat('<span style="color: red;">',e.val().length,"</span>"):e.val().length;e.parent().find(".memo-counter").html(["(",i,"/",n,")"].join(""))},t.prototype.onMemoHintBoxBtnClick=function(t,e){var n=$(t).parent().find(".help-box");e?n.fadeOut(200):n.fadeIn(400,function(){})},t.prototype.onUserMenuClickFn=function(t,e,n){var i=$(e);t.preventDefault();var o=i.parent();!o.find("div").is(":hidden")||n?(o.find("div").fadeOut(200),o.find("i").removeClass("up")):(o.find("div").fadeIn(400),o.find("i").addClass("up"))},t.prototype.onTopMenuClickFn=function(t,e,n){var i=$(e);t.preventDefault();var o=i.parent();!o.find(".csson").is(":hidden")||n?(o.find(".csson").fadeOut(200),o.find(".menu").removeClass("hover")):(o.find(".csson").fadeIn(400),o.find(".menu").addClass("hover"))},t.prototype.showHint=function(t,e){var n=$(".error-hint-box"),i=1;i=$("*").is(t)?t.offset().top:1,n.text(e).css({left:t.offset().left,top:i+t.outerHeight()+10}),n.stop().fadeIn(400)},t.prototype.closeHint=function(){$(".error-hint-box").stop().fadeOut(200)},t.prototype.doSmth=function(t){$(".referer").val(sbjs.get.current.typ),$(".transition").val(sbjs.get.current.src),$(".canal").val(sbjs.get.current.mdm),$(".campaign").val(sbjs.get.current.cmp),$(".content").val(sbjs.get.current.cnt),$(".keywords").val(sbjs.get.current.trm),$(".point").val(sbjs.get.current_add.ep),$(".last_referer").val(sbjs.get.current_add.rf)},t.prototype.debug=function(t){"publVac"==t&&($("#Mtitle").val("test"),$("#M1requirements").val("test"),$("#M2duties").val("test"),$("#M3conditions").val("test"),$("#CB1Dolj").val("18"),$("#CB2city").val("1"),$("#CB6salary").val("1"),$("#EdSalRubH").val("1"),$("#EdExp").val("1"))},t.prototype.onAutocompleteFn=function(){var t=$("#EdSearch").getSelectedItemData();3==$("#CBvacancy").val()&&(console.log(t.code),window.location.href=MainConfig.PAGE_SEARCH_PROMO+"/"+t.code)},t.prototype.onChangeSearchTypeFn=function(t,e){var n=$(e),i=$("#EdSearch"),o=$("#FmSearch"),a=n.val();1==a&&(o.attr("action",MainConfig.PAGE_SEARCH_VAC),i.attr("name","posts")),2==a&&(o.attr("action",MainConfig.PAGE_SEARCH_PROMO),i.attr("name","qs")),3==a&&(o.attr("action",MainConfig.PAGE_SEARCH_EMPL),i.attr("name","qs")),i.attr("placeholder",i.data("ph"+a))},t}(),VacResponses=function(){function t(){}return t.prototype.doResponse=function(t,e){$.get(MainConfig.AJAX_POST_SETVACATIONRESPONSE,{id:G_VARS.idVac},function(t){t=JSON.parse(t),ModalWindow.open({content:t.html}),e(t)})},t}(),Page=function(){function t(){this.FLAG_STOP=0,this.FormCheckers=new FormCheckers}return t.prototype.bindFiltersFn=function(t){var e=this,n=new FormFilters;n.bindFiltersFn(t),e.FormFilter=n},t.prototype.onFormSubmit=function(t,e,n){var i=this;n||(n={}),n.onBeforeSubmit&&(n.inJustReturn=1);var o=i.FormCheckers;n||(n={});var a=o.FormSubmit(CommFuncs.merge({event:t,form:e},n));return a&&n.onBeforeSubmit&&(n.onBeforeSubmit()?e.submit():a=!1),a},t}(),PageSearchVacs=function(){function t(){this.CBcityMulti={};var t=this;$("#ChkAllContacts").change(function(e,n){t.onChkAllContactsChangeFN(this,n)}),$(".filter-dolj input.dolj").bind("customOnCheck",function(){t.onDoljCustomOnCheckFN(this)}),$("#EdSalPerHF, #EdSalPerHT").keypress(function(t){$("#RBShour").click()}),$("#EdSalPerWF, #EdSalPerWT").keypress(function(t){$("#RBSweek").click()}),$("#EdSalPerMF, #EdSalPerMT").keypress(function(t){$("#RBSmonth").click()}),t.init()}return t.prototype.init=function(){var t=this;$(".filter-label .filter-name").click(function(e){t.onFilterNameClickFn(e,this)}),Hinter.bind(".premium ._head",{animation:"swing"}),Hinter.bind(".vac-num span");var e=0;$(".table-view .premium .border").each(function(){var t=$(this);t.outerHeight()>e&&(e=t.outerHeight())}).each(function(){$(this).css({minHeight:e+"px"})}),$("#CBcities").change(function(){}).multipleSelect({placeholder:"выберите город...",selectAllText:"Все/снять выделение",allSelected:"",multipleWidthType:120,minimumCountSelected:2,countSelected:"# / %",noMatchesFound:"Добавьте город =>"}),t.CBcityMulti=new DDMultiAjax("#CBcities",{loadingObj:"#DiLoading",insertAllow:0,width:200,insertFirst:1,loadingGIF:MainConfig.PATH_PIC+"loading2.gif",labelText:"Введите название города",btnAddHint:"Добавить город",ajaxParams:{inputName:"filter",url:MainConfig.AJAX_GET_CITYES,addParams:{idco:0,limit:20,getCity:1}},afterItemSelected:function(t){}})},t.prototype.onChkAllContactsChangeFN=function(t,e){var n=$(t).is(":checked");e||$(".filter-dolj input.dolj").each(function(){var t=$(this);t[0].checked=n,t.trigger("change",{noFireEvent:1})})},t.prototype.onDoljCustomOnCheckFN=function(t){var e=0;$(".filter-dolj input.dolj").each(function(){if(!$(this)[0].checked)return e=1,!1});var n=$("#ChkAllContacts");n[0].checked=!e,n.trigger("change",{isJustUnchk:1})},t.prototype.onFilterNameClickFn=function(t,e){var n=$(e);n.hasClass("opened")?n.closest(".filter-label").find(".filter-content").slideUp(200):n.closest(".filter-label").find(".filter-content").slideDown(400),n.toggleClass("opened")},t.prototype.onFilterApplyClickFn=function(t,e){var n=$("#F1Filter").serialize();if(1==$G_PAGE_VIEW)i=$(".table-view");else var i=$(".list-view");G_VARS.App.showLoading(i,0,{top:1,pic:3}),2==$G_PAGE_VIEW&&(n+="&addmetro=1"),$.post(MainConfig.AJAX_POST_GETVACS,n,function(t){if(t=JSON.parse(t),i.empty(),$("body").animate({scrollTop:0},500),t&&t.length>0&&!t.error){var e=1;for(var n in t){var o=t[n];if("length"!=n)if(1==$G_PAGE_VIEW){(c=$(".tab-view-tpl").clone()).toggleClass("tab-view-tpl"),1==o.ispremium&&c.addClass("premium"),s="";for(var a in o.city)s=s+o.city[a]+", ";s=s.substr(0,s.length-2),c.find(".city").append(s),s="";for(var a in o.post)s=s+o.post[a]+", ";s=s.substr(0,s.length-2),c.find("h3 a").text(s).attr("href",function(t,e){return e+o.id});s="";"1"==o.isman&&(s="Юноши"),"1"==o.isman&&"1"==o.iswoman&&(s+=", "),"1"==o.iswoman&&(s+="Девушки"),"1"!=o.isman&&"1"!=o.iswoman||c.find("h3").after(s+"<br>"),c.find(".istemp").text("1"==o.istemp?"Постоянная":"Временная");var s="",r=0;o.shour>0&&(s="<span class='nowrap'>".concat(o.shour," руб/час</span>"),r=1),r&&o.sweek>0&&(s+=", "),o.sweek>0&&(s+="<span class='nowrap'>"+o.sweek+" руб/неделю</span>",r=1),r&&o.smonth>0&&(s+=", "),o.smonth>0&&(s+="<span class='nowrap'>"+o.smonth+" руб/мес</span>"),r||o.smonth?c.find(".payment").html(function(t,e){return e+s+"<br>"}):c.find(".payment").remove(),c.find(".bdate").text(o.bdate),"1"==o.istemp?c.find(".edate").remove():c.find(".edate span").text(o.edate),c.find(".company").text(o.coname),c.find(".date").text(o.crdate),i.append(c),e%2==0&&$("<div class='clear visible-sm'></div>").appendTo(i),e%3==0&&$("<div class='clear visible-md visible-lg'></div>").appendTo(i),e++}else{var c=$(".list-view-tpl").clone();c.toggleClass("list-view-tpl"),1==o.ispremium&&c.addClass("premium"),c.find(".num").text(o.id),c.find(".crdate").text(o.crdate),c.find(".title").text(o.title);var l=""==o.logo?G_DEF_LOGO:o.logo;c.find(".company-logo img").attr("src",function(t,e){return e+l}),s="";for(var a in o.post)s=s+o.post[a]+", ";s=s.substr(0,s.length-2),c.find("h2").text(s+" ("+o.id+")").attr("href",function(t,e){return e+o.id});s="";"1"==o.isman&&(s="Юноши"),"1"==o.isman&&"1"==o.iswoman&&(s+=", "),"1"==o.iswoman&&(s+="Девушки"),"1"==o.isman||"1"==o.iswoman?c.find(".sexval").html(s+"<br>"):c.find(".sex").remove();var s="",r=0;o.shour>0&&(s="<span class='nowrap'>".concat(o.shour," руб/час</span>"),r=1),r&&o.sweek>0&&(s+=", "),o.sweek>0&&(s+="<span class='nowrap'>"+o.sweek+" руб/неделю</span>",r=1),r&&o.smonth>0&&(s+=", "),o.smonth>0&&(s+="<span class='nowrap'>"+o.smonth+" руб/мес</span>"),r||o.smonth?c.find(".paymentval").html(function(t,e){return e+s+"<br>"}):c.find(".payment").remove(),s="";for(var a in o.city)s=s+o.city[a]+", ";s=s.substr(0,s.length-2),c.find(".city").html(s),s="";for(var a in o.metroes)s=s+o.metroes[a]+", ";(s=s.substr(0,s.length-2)).length?c.find(".metroval").html(s):c.find(".metro").remove(),c.find(".duties").text(o.duties),c.find(".istemp").text("1"==o.istemp?"Постоянная":"Временная"),c.find(".bdate").text(o.bdate),"1"==o.istemp?c.find(".edate").remove():c.find(".edate span").text(o.edate),c.find(".company-logo .name").text(o.coname),i.append(c)}}var p=0;$(".table-view .premium .border").each(function(){var t=$(this);t.outerHeight()>p&&(p=t.outerHeight())}).each(function(){$(this).css({minHeight:p+"px"})})}else i.append("<div class='nodata'>Данным условиям нет подходящих вакансий</div>")}).always(function(){G_VARS.App.hideLoading()})},t}(),PageRegister=function(t){function e(){t.call(this),this.FLAG_STOP=0;var e=this;$("#F1registerEmpl").on("submit",function(t){e.onFormSubmit(t,this)}),$("#F1registerAppl").on("submit",function(t){e.onFormSubmit(t,this)}),e.init()}return __extends(e,t),e.prototype.init=function(){var t=this;$("#EdBdate").datepicker({format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,language:"ru"}),$("#EdBdate").datepicker("update",new Date(moment($("#EdBdate").val(),"DD.MM.YYYY"))),t.bindFiltersFn()},e.prototype.onF1registerSubmitFn=function(t,e){var n=this,i="",o=0;if(o||""==(s=(a=$("#EdType")).val())&&(o=1,i="Необходимо выбрать тип компании"),o||""==(s=(a=$("#EdEmail")).val())&&(o=1,i="Необходимо заполнить электронный адрес"),o||""==(s=(a=$("#EdPass")).val())&&(o=1,i="Необходимо заполнить пароль"),!o){var a=$("#EdPass"),s=a.val();s!=$("#EdPassRep").val()&&(o=1,i="Пароль и его подтверждение не совпадают")}if(o){n.FLAG_STOP=1;var r=1;r=$("*").is(a)?a.offset().top:1,$("body").stop().animate({scrollTop:r-30+"px"},500,function(){var t=$(".error-hint-box");t.text(i).css({left:a.offset().left,top:r+a.outerHeight()+10}),t.stop().fadeIn(400),a.removeClass("field--success"),a.addClass("field--warning"),a.focus(),a.on("blur",function(){n.FLAG_STOP||t.fadeOut(200),$(this).off("blur")}),n.FLAG_STOP=1}),t.preventDefault()}},e}(Page),PageApplicantProfile=function(t){function e(){t.call(this);var e=this;e.CommentAdditor=new CommentAdditor,$("#BtnComment a").click(function(t){e.onCommentClick(t)}),HiddenText.init({wrapper:".comment .text-wrapp",content:".text",openText:"Смотреть полностью",closeText:"Свернуть",hiddenImg:""})}return __extends(e,t),e.prototype.onCommentClick=function(t){var e=this;if(FLAG_MOBILE)return 1;t.preventDefault(),e.CommentAdditor.open({getUrl:"/test/ajax/ajax-applicant-profile-own-comment.php",formAction:"/test/ajax/ajax-applicant-profile-own-comment.php"})},e}(Page),PageApplicantProfileOwn=function(t){function e(){t.call(this);var e=this;e.CommentAdditor=new CommentAdditor,$("#BtnComment a").click(function(t){e.onCommentClick(t)}),HiddenText.init({wrapper:".comment-box .text-wrapp",content:".text",openText:"Смотреть полностью",closeText:"Свернуть",openBtnClass:"look-full-comm",hiddenImg:""}),$(".affective-perc").hover(function(t){e.showHintBox($(this),{content:"Чтобы повысить эффективность своего профиля: заполните как можно больше полей в своём профиле. Для этого нажмите кнопку редактирования профиля",posFunc:function(t,e){e.removeClass().addClass("hint-box"),$(window).width()>768&&$(window).width()<1200?e.css({left:t.offset().left+(t.outerWidth()-e.outerWidth())/2}).addClass("top-center"):e.css({left:t.offset().left+t.outerWidth()-e.outerWidth()});var n=1;n=$("*").is(t)?t.offset().top:1,e.css({top:n+t.height()+20})}})},function(){e.showHintBox(null,null,0)}),e.init()}return __extends(e,t),e.prototype.init=function(){var t=this;$(".user-info-blocks").matchHeight({property:"min-height"}),$(".js-btn-invite a").click(function(e){t.onInviteBtnClick(e,this)})},e.prototype.onInformationClic=function(t,e){var n=$(".Infos").clone();ModalWindow.open({content:n,action:{active:0},bgIsCloseBtn:0,position:"absolute",context:"body",afterOpen:function(){$("#DiSiteWrapp").css({overflow:"hidden"})},afterClose:function(){$("#DiSiteWrapp").css({overflow:""})}})},e.prototype.onCommentClick=function(t){var e=this;if(FLAG_MOBILE)return 1;t.preventDefault(),e.CommentAdditor.open({getUrl:"/test/ajax/ajax-applicant-profile-own-comment.php",formAction:"/test/ajax/ajax-applicant-profile-own-comment.php"})},e.prototype.showHintBox=function(t,e,n){void 0===n&&(n=1);var i=$(".hint-box"),o=$(".hint-box::before");if(n){var a={content:"",width:"300px",positon:"bottom",bgcolor:"#abb820",color:"#fff",fontSize:"13px",triangle:{bottom:{right:10}},posFunc:""};if(e.triangle&&$.extend(a.triangle.bottom,e.triangle.bottom),$.extend(a.triangle,e.triangle),$.extend(a,e),e=a,i.find("span").text(e.content),i.css({width:e.width,background:e.bgcolor,color:e.color,fontSize:e.fontSize}),o.css({background:e.bgcolor}),"bottom"==e.positon||e.positon,e.posFunc)e.posFunc(t,i);else if("bottom"==e.positon){var s=1;s=$("*").is(t)?t.offset().top:1,i.css({left:t.offset().left+t.outerWidth()-i.outerWidth(),top:s+t.height()+20})}i.fadeIn(400)}else i.fadeOut(200)},e.prototype.onInviteBtnClick=function(t,e){var n=this;t.preventDefault(),$.get(MainConfig.AJAX_GET_GETVACANCIES,{},function(t){try{if(Object.keys(t.vacs).length>0){var e=(s=$($("#TplInvVacs").text())).find("select");for(var i in t.vacs){var o=t.vacs[i],a=$("<option/>");a.val(o.id),a.text(o.title+" ("+o.id+")"),e.append(a)}ModalWindow.open({content:s,action:{btnTitle:$("#TplInvVacs").data("btn"),onClick:function(){n.doInvite()}}})}else{var s=$($("#TplInvNoVacs").text());ModalWindow.open({content:s})}}catch(t){t.code;t.message,1}},"json")},e.prototype.doInvite=function(){ModalWindow.loadingOn();var t={id:$("#CbVacs").val(),idPromo:G_VARS.App.customProps.idPromo},e=_t("inviteError");$.post(MainConfig.AJAX_POST_INVITE,t,function(t){var n=0;try{if(100!=t.error)throw t.error<0?new CustomError(t.message,-102,t.error):new CustomError(e,-101);(o=$($("#TplInvSuccess").text())).text(t.message),ModalWindow.redraw({content:o})}catch(t){var i=t.code;e=t.message,t.retCode&&(i+=":"+t.retCode),n=1}if(n){console.warn("E",i);var o=$($("#TplInvSuccess").text());o.text(e),ModalWindow.redraw({content:o})}},"json").fail(function(){var t=$($("#TplInvSuccess").text());t.text(e),ModalWindow.redraw({content:t})})},e}(Page),PageApplicantComments=function(t){function e(){t.call(this);var e=this;e.CommentAdditor=new CommentAdditor,$(".btn-comment a").click(function(t){e.onCommentClick(t)})}return __extends(e,t),e.prototype.onCommentClick=function(t){var e=this;t.preventDefault(),e.CommentAdditor.open({getUrl:"/test/ajax/ajax-applicant-profile-own-comment.php",formAction:"/test/ajax/ajax-applicant-profile-own-comment.php"})},e}(Page),PageCompanyProfileOwn=function(t){function e(){t.call(this);var e=this;HiddenText.init({wrapper:".comment-box .text-wrapp",openBtnClass:"look-full-comm",content:".text",openText:"Смотреть полностью",closeText:"Свернуть",hiddenImg:""}),e.init()}return __extends(e,t),e.prototype.init=function(){var t=this;1==G_VARS.Modal&&$(function(e){t.onInformationClick(e,this)})},e}(Page);PageCompanyProfileOwn.prototype.onInformationClick=function(t,e){var n=$(".Info").clone();ModalWindow.open({content:n,action:{active:0},bgIsCloseBtn:0,position:"absolute",context:"body",afterOpen:function(){$("#DiSiteWrapp").css({overflow:"hidden"})},afterClose:function(){$("#DiSiteWrapp").css({overflow:""})}})};var PageApplicantList=function(){function t(){this.doljChoice=19,this.cityMoskowChoice=1001,this.cityPiterChoice=1002,this.CBcityMulti={};var t=this;$(".filter-dolj input.dolj").bind("customOnCheck",function(){t.onDoljCustomOnCheckFN(this)}),$(".filter-open a").click(function(e){t.onFilterOpenClickFn(e,this)}),t.init()}return t.prototype.init=function(){var t=this,e={selectAllText:"Выбрать все",countSelected:"# из %",allSelected:"Выбраны все"};$("#CBcities").change(function(){}).multipleSelect(CommFuncs.merge(e,{placeholder:"выберите город...",allSelected:"",noMatchesFound:"Добавьте город =>",onUncheckAll:function(e){t.onCBcityChangeFn(e)},onClick:function(e){t.onCBcityChangeFn(e)},onCheckAll:function(e){t.onCBcityChangeFn(e,1)}})),t.CBcityMulti=new DDMultiAjax("#CBcities",{loadingObj:"#DiLoading",insertAllow:0,width:180,insertFirst:1,loadingGIF:MainConfig.PATH_PIC+"loading2.gif",labelText:"Введите название города",btnAddHint:"Добавить город",ajaxParams:{inputName:"filter",url:MainConfig.AJAX_GET_CITYES,addParams:{idco:0,limit:20,getCity:1}},afterItemSelected:function(e){t.onCityChangeFn(e)}}),$(".metro-block select").change(function(){}).multipleSelect(CommFuncs.merge(e,{placeholder:"выберите метро...",filter:!0})),$("#CBdolj").change(function(){}).multipleSelect(CommFuncs.merge(e,{placeholder:"выберите должность...",filter:!0,onUncheckAll:function(e){t.onCBdoljChangeFn(e)},onClick:function(e){t.onCBdoljChangeFn(e)},onCheckAll:function(e){t.onCBdoljChangeFn(e,1)}}))},t.prototype.onCBcityChangeFn=function(t,e){var n=$("#CBcities").multipleSelect("getSelects"),i=($("#CBcities").multipleSelect("getSelects","text"),[]);$("#DiMetroesBlock .metro-block").each(function(){var t=parseInt($(this).attr("data-id"));i.push(t);var e=0;for(var o in n)if(t==n[o]){e=1;break}e?$(this).slideDown(400,function(){$(this).find("select").prop("disabled",!1)}):$(this).slideUp(200,function(){$(this).find("select").prop("disabled",!0)})})},t.prototype.onCityChangeFn=function(t){var e=this,n=t?t[0]:0,i=0;for(var o in e.CBcityMulti.ajaxRetData)if(e.CBcityMulti.ajaxRetData[o].id==n&&"1"==e.CBcityMulti.ajaxRetData[o].ismetro){i=1;break}i&&n>0&&!G_VARS.appcache["metro"+n]&&$.get(MainConfig.AJAX_GET_METRO,{idcity:n},function(e){e=JSON.parse(e),G_VARS.appcache["metro"+n]=e;var i=$(".metro-tpl").clone();i.attr("data-id",n).toggleClass("metro-tpl metro-block"),i.hide();var o=i.find("label"),a=o.attr("for")+n;o.attr("for",a),o.text(o.text()+"".concat(" (",t[1],"):"));var s=i.find("select");s.attr("id",a),s.attr("name","metro[]");for(var r in e){var c=e[r];$("<option value='".concat(c.id,"'>",c.name,"</option>")).appendTo(s)}$("#DiMetroesBlock").append(i),i.slideDown(400),s.multipleSelect({placeholder:"выберите метро...",selectAllText:"Выбрать все/снять выделение",allSelected:"Выбраны все",filter:!0,countSelected:"# / %"})}).always(function(){})},t.prototype.onCBdoljChangeFn=function(t,e){var n=this,i=$("#CBdolj").multipleSelect("getSelects");$.inArray(n.doljChoice+"",i)>-1?$(".self-dolj").slideDown(400,function(){$(this).css({display:"block"})}):$(".self-dolj").slideUp(200)},t.prototype.onFilterOpenClickFn=function(t,e){t.preventDefault();var n=$(e);$(".filter").slideToggle(400),n.closest("div").toggleClass("opened")},t}(),PageCompanyList=function(){function t(){this.doljChoice=19,this.cityMoskowChoice=1001,this.cityPiterChoice=1002,this.CBcityMulti={};var t=this;$(".filter-open a").click(function(e){t.onFilterOpenClickFn(e,this)}),$(".btn-rate-details a").on("click",function(e){t.onRateDetailClickFn(e,this)}),t.init()}return t.prototype.init=function(){var t=this,e={selectAllText:"Выбрать все/снять выделение",countSelected:"# из %",allSelected:"Выбраны все"};$("#CBcities").change(function(){}).multipleSelect(CommFuncs.merge(e,{placeholder:"выберите город...",allSelected:"",noMatchesFound:"Добавьте город =>",onUncheckAll:function(e){t.onCBcityChangeFn(e)},onClick:function(e){t.onCBcityChangeFn(e)},onCheckAll:function(e){t.onCBcityChangeFn(e,1)}})),t.CBcityMulti=new DDMultiAjax("#CBcities",{loadingObj:"#DiLoading",insertAllow:0,width:180,insertFirst:1,loadingGIF:MainConfig.PATH_PIC+"loading2.gif",labelText:"Введите название города",btnAddHint:"Добавить город",ajaxParams:{inputName:"filter",url:MainConfig.AJAX_GET_CITYES,addParams:{idco:0,limit:20,getCity:1}},afterItemSelected:function(t){}}),$("#CBtype").change(function(){}).multipleSelect(CommFuncs.merge(e,{placeholder:"выберите тип...",minimumCountSelected:2}))},t.prototype.onCBcityChangeFn=function(t,e){$("#CBcities").multipleSelect("getSelects")},t.prototype.onCBdoljChangeFn=function(t,e){var n=this,i=$("#CBdolj").multipleSelect("getSelects");$.inArray(n.doljChoice+"",i)>-1?$(".self-dolj").slideDown(400,function(){$(this).css({display:"block"})}):$(".self-dolj").slideUp(200)},t.prototype.onFilterOpenClickFn=function(t,e){t.preventDefault();var n=$(e);$(".filter").slideToggle(400),n.closest("div").toggleClass("opened")},t.prototype.onRateDetailClickFn=function(t,e){var n=$(e);t.preventDefault(),G_VARS.App.showLoading(n,0,{offsetLeft:n.outerWidth()+5}),$.get(MainConfig.AJAX_GET_GETEMPLRATE,{id:n.data("id")},function(t){t=JSON.parse(t);var e=n.closest(".rate-block").find("table.rate"),i=e.find("thead tr");for(var o in t.rate.pointRate){var a=t.rate.pointRate[o],s=i.clone().removeClass("rate-tpl");s.find(".val .num").text(a[0]-a[1]),s.find(".val .good").text(a[0]),s.find(".val .bad").text(a[1]),s.find(".progress .progr-line").addClass(a[0]>a[1]?"progress-green":"progress-red").css({width:a[0]-a[1]==0?0:100*Math.abs(a[0]-a[1])/t.rate.maxPointRate+"%"}),s.find(".text").text(t.rate.rateNames[o]),e.find("tbody").append(s)}e.hide().removeClass(".hide-rate").slideDown(400),n.fadeOut(200)}).always(function(){G_VARS.App.hideLoading()})},t.prototype.onFilterApplyClickFn=function(t,e){var n=this,i=$("#F1Filter").serialize(),o=$(".list-view");G_VARS.App.showLoading(o,0,{top:1,pic:3}),$.post(MainConfig.AJAX_POST_GETEMPLS,i,function(t){if(t=JSON.parse(t),console.info("data",t),o.empty(),$("body").animate({scrollTop:0},500),t&&t.length>0&&!t.error){for(var e in t.empls){var i=t.empls[e];if("length"!=e){var a=$(".empl-item-tpl").clone();a.toggleClass("empl-item-tpl"),a.find("h2 small i").text(i.id),a.find("h2 a").text(i.name),a.find(".com-rate .pos").text(i.rate),a.find(".com-rate .neg").text(i.rate_neg),a.find(".btn-rate-details a").attr("data-id",i.id_user),a.find(".profile-link").attr("href",function(t,e){return e+i.id});var s=i.logo&&""!=i.logo?i.logo:G_VARS.DEF_LOGO_EMPL;a.find(".company-logo img").attr("src",function(t,e){return e+s}),s1="";for(var r in i.city)s1=s1+i.city[r]+", ";s1=s1.substr(0,s1.length-2),a.find(".city").html(s1),s1="";for(var r in i.metroes)s1=s1+i.metroes[r]+", ";s1=s1.substr(0,s1.length-2),""==s1?a.find(".metroes").remove():a.find(".metroes small").html(s1),a.find(".cotype small").text(i.tname),o.append(a),a.find(".btn-rate-details a").on("click",function(t){n.onRateDetailClickFn(t,this)})}}var c=0;$(".table-view .premium .border").each(function(){var t=$(this);t.outerHeight()>c&&(c=t.outerHeight())}).each(function(){$(this).css({minHeight:c+"px"})})}else o.append("<div class='nodata'>Данным условиям нет подходящих вакансий</div>")}).always(function(){G_VARS.App.hideLoading()})},t}(),PageCompanyServices=function(){function t(){this.doljChoice=19,this.cityMoskowChoice=1001,this.cityPiterChoice=1002;var t=this;$(".menu a").click(function(e){t.onMenuClickFn(e,this)}),t.init()}return t.prototype.init=function(){},t.prototype.onMenuClickFn=function(t,e){t.preventDefault();var n=$(e).prop("hash").replace(/#/,""),i=1;i=$("*").is("a[name="+n+"]")?$("a[name="+n+"]").offset().top:1,$("body").stop().animate({scrollTop:i-20+"px"},500)},t}(),PageServices=function(t){function e(){t.call(this),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;$(".btn-same-adr button").click(function(e){t.onSameAdrClickFn(e,this)}),$(".order-btn a").click(function(e){t.onOrderServiceClickFn(e,this)}),$(".page-services .services__item-block").click(function(e){t.onServiceInDevClickFn(e,this)}),$(".page-services .services__sub-item").click(function(e){t.onServiceInDevClickFn(e,this)}),$(".btn-order-prommucard button").click(function(t){$(".form").slideDown(400),$(this).parent().slideUp(200)});var e=new Uploaduni;$("#UplImg").change(function(){t.onUploadFileSetFn(this,e)}),$(".btn-upload button").click(function(t){$("#F2upload").find(".message").text("");var e=$("#UplImg");e.replaceWith(e.clone(!0)),$("#UplImg").trigger("click")}),e.init({uploadConnector:MainConfig.AJAX_POST_UPLOADUNI,scope:"services",imgBlockTmpl:"doc-scan-tpl",imgsWrapper:"#DiImgs",lnktoimg:"orig",uploadForm:"#F2upload",messageBlock:".message",loadingBLock:".loading-ico"}),e.setFiles(G_VARS.uniFiles),$(".btn-order").click(function(t){t.preventDefault(),$("#F1cardOrder").submit()}),$("#F1cardOrder").submit(function(t){var n=e.getFiles();for(var i in n){n[i];$('<input type="hidden" name="files[]" value="'+i+'"/>').appendTo("#F1cardOrder")}}),t.bindFiltersFn()},e.prototype.onOrderCreateFn=function(t,e){var n=$(e),i=(new FormCheckers).FormSubmit({event:t,form:n.closest("form"),justReturn:1});if(t.preventDefault(),checkFields=new InputFields,checkFields.checkPhone("#service-phone")||(i=!1),checkFields.checkEmail("#service-email")||(i=!1),i){var o=n.closest("form").serialize();$.post(MainConfig.AJAX_POST_CREATESERVICEORDER,o,function(t){t=JSON.parse(t);var e=$(".order-success-tpl").clone();e.toggleClass("order-success-tpl tmpl order-success"),ModalWindow.redraw({content:e,action:{active:1}})})}},e.prototype.onSameAdrClickFn=function(t,e){$("#EdAddr").val($("#EdRegaddr").val()),$("#CbCountry").val($("#CbRegcountry").val())},e.prototype.onOrderServiceClickFn=function(t,e){var n=this,i=$(e).parent().data("id");if(t.preventDefault(),"sms"==i)(o=$(".services-form.sms-form").clone()).toggleClass("services-form tmpl"),ModalWindow.open({content:o,action:{active:0},additionalStyle:"light-ver",afterOpen:function(){$(".mw-win").css({position:"fixed",top:"40%"})}});else if("push"==i)(o=$(".services-form.push-form").clone()).toggleClass("services-form tmpl"),$("body").animate({scrollTop:0},500),ModalWindow.open({content:o,action:{active:0},additionalStyle:"dark-ver",afterOpen:function(){$(".mw-win.dark-ver").css({position:"absolute",margin:"0 0 0 50%",left:"-175px",top:"100px"})}});else if("premium"==i){var o=$(".services-form.premium-form").clone();o.toggleClass("services-form tmpl"),ModalWindow.open({content:o,action:{active:0},additionalStyle:"light-ver",afterOpen:function(){$(".mw-win").css({position:"fixed",top:"40%"})}})}else $.get(MainConfig.AJAX_GET_GETSERVICE,{id:i},function(t){t=JSON.parse(t);var e=$(".form-order-tpl").clone();e.attr("data-title",t.name),e.find("#HiId").val(i),checkFields=new InputFields,checkFields.setPhoneMask(e.find("#service-phone")),e.toggleClass("form-order-tpl tmpl form-order"),ModalWindow.open({content:e,action:{active:0},afterOpen:function(){$(".mw-win").css({position:"fixed",top:"40%"})}}),e.find(".btn-order-create").click(function(t){n.onOrderCreateFn(t,this)}),e.find("#service-phone").change(function(){checkFields.checkPhone("#service-phone")}),e.find("#service-email").change(function(){checkFields.checkEmail("#service-email")})})},e.prototype.onServiceInDevClickFn=function(t,e){if($(e).data("disable")){var n=$(".services-form.disable-form").clone();n.toggleClass("services-form tmpl"),ModalWindow.open({content:n,action:{active:0},additionalStyle:"dark-ver"})}},e.prototype.onOrderPrommucardClickFn=function(t,e){$(e).parent().data("id");t.preventDefault()},e.prototype.onUploadFileSetFn=function(t,e){e.upload(t)},e}(Page),PageLogin=function(t){function e(){t.call(this)}return __extends(e,t),e}(Page),PageVacancyView=function(){function t(){var t=this;t.VacResponses=new VacResponses,$(".btn-show-contacts a").click(function(e){t.onShowContactsCLick(e,this)}),$(".btn-response a").click(function(e){t.onResponseClickFn(e,this)}),t.init()}return t.prototype.init=function(){var t=this;if($(window).innerWidth()<768&&$("#DiCompInfo").attr("class","").appendTo("#DiComp"),CommFuncs.parseUrl().tab){var e=1;e=$("*").is(".tabs-panel")?$(".tabs-panel").offset().top:1,$("body").stop().animate({scrollTop:e-20+"px"},10)}Hinter.bind(".btn-edit-vac a"),$(".controls .view").click(function(e){t.onChangeStatusCLickFn(e,this,1)}),$(".controls .cancel").click(function(e){t.onChangeStatusCLickFn(e,this,3)}),$(".controls .apply").click(function(e){t.onChangeStatusCLickFn(e,this,5)})},t.prototype.onShowContactsCLick=function(t,e){var n=$(e),i=$(".contacts-block");t.preventDefault(),$.get(MainConfig.AJAX_GET_GETEMPLCONTACTS,{id:G_VARS.eid,idvac:G_VARS.idvac},function(t){(t=JSON.parse(t)).mob&&i.find(".mob").text(t.mob),t.addmob&&i.find(".addmob").text(", "+t.addmob),t.addmob||t.mob||$(".tel-block").remove(),i.find(".email").text(t.email),i.slideDown(400),n.fadeOut(200)})},t.prototype.onChangeStatusCLickFn=function(t,e,n){var i=$(e);if(t.preventDefault(),5==n&&!confirm("Подтвредите действие"))return 0;$.post(MainConfig.AJAX_POST_SETRESPONSESTATUS,{idres:i.closest(".controls").data("sid"),s:n},function(t){if(!(t=JSON.parse(t)).error){if(1==n)i.closest("tr").fadeOut(300,function(){$(this).remove()});else if(3==n)i.closest("tr").fadeOut(300,function(){$(this).remove()});else if(4==n){var e=i.closest(".controls");i.closest("tr").removeClass("-new"),e.find(".view").parent().fadeOut(300,function(){$(this).remove()}),e.find(".cancel").parent().fadeOut(300,function(){$(this).remove()}),i.parent().fadeOut(300,function(){$(this).remove(),e.find(".status").hide().removeClass("hide").fadeIn(400)})}var o=[0];for(var a in t.counts){var s=t.counts[a];a=parseInt(a),CommFuncs.inArray(a,[0,4,5,6,7])?o[0]+=s:o[a]=s}$(".tabs-wrapp .tab1 span").text("("+o[0]+")"),$(".tabs-wrapp .tab2 span").text("("+o[3]+")"),$(".tabs-wrapp .tab3 span").text("("+o[1]+")")}})},t.prototype.onResponseClickFn=function(t,e){var n=this,i=$(e);t.preventDefault(),G_VARS.App.showLoading(i,0,{align:"center",pic:1,variant:2}),n.VacResponses.doResponse(G_VARS.idVac,function(t){G_VARS.App.hideLoading(),t.error||($(".btn-response").fadeOut(200,function(){$(this).remove()}),$(".resp-message").text(t.message))})},t}(),ResponsesCompany=function(){function t(){var t=this;t.VacResponses=new VacResponses,$(".controls .view").click(function(e){t.onChangeStatusCLickFn(e,this,1)}),$(".controls .cancel").click(function(e){t.onChangeStatusCLickFn(e,this,3)}),$(".controls .apply").click(function(e){t.onChangeStatusCLickFn(e,this,5)}),t.init()}return t.prototype.init=function(){Hinter.bind(".js-hashint")},t.prototype.onChangeStatusCLickFn=function(t,e,n){var i=$(e);if(t.preventDefault(),(3==n||4==n)&&!confirm("Подтвредите действие"))return 0;$.post(MainConfig.AJAX_POST_SETRESPONSESTATUS,{idres:i.closest(".controls").data("sid"),s:n},function(t){if(!(t=JSON.parse(t)).error)if(1==n)i.closest(".row").removeClass("-new"),i.fadeOut(300,function(){$(this).parent().remove()});else if(3==n)i.closest(".row").fadeOut(300,function(){$(this).remove()});else if(4==n){var e=i.closest(".controls");i.closest(".row").removeClass("-new"),e.find(".view").parent().fadeOut(300,function(){$(this).remove()}),e.find(".cancel").parent().fadeOut(300,function(){$(this).remove()}),i.parent().fadeOut(300,function(){$(this).remove(),e.find(".status").hide().removeClass("hide").fadeIn(400)})}})},t}(),ResponsesApplic=function(){function t(){var t=this;t.VacResponses=new VacResponses,$(".controls .js-cancel").click(function(e){t.onChangeStatusCLickFn(e,this,3)}),$(".controls .apply").click(function(e){t.onChangeStatusCLickFn(e,this,5)}),t.init()}return t.prototype.init=function(){Hinter.bind(".js-hashint")},t.prototype.onChangeStatusCLickFn=function(t,e,n){var i=$(e);if(t.preventDefault(),$.inArray(n,[3,5])>-1&&!confirm("Подтвредите действие"))return 0;$.post(MainConfig.AJAX_POST_SETRESPONSESTATUS,{idres:i.closest(".controls").data("sid"),s:n},function(t){if(!(t=JSON.parse(t)).error)if(5==n){var e=i.closest(".controls");i.closest(".row").removeClass("-new"),i.parent().fadeOut(300,function(){e.find(".status").removeClass("hint").attr("title","").text(i.data("status")),$(this).remove()}),ModalWindow.open({content:t.message}),e.find(".js-cancel").fadeOut(200,function(){$(this).remove()}),e.find(".js-applied").fadeIn(400)}else if(3==n){var o=i.closest(".row");o.fadeOut(300,function(){o.remove()})}})},t}(),SetrateApplic=function(t){function e(){t.call(this);var e=this;$(".rate-buttons-block a").click(function(t){e.onSetRateClick(t,this,5)}),$("#F1rate").submit(function(t){e.onFormSubmit(t,this)})}return __extends(e,t),e.prototype.onSetRateClick=function(t,e,n){var i=$(e);t.preventDefault(),i.closest("tr").find(".rate-value").val(i.data("val")),i.parent().find(".active").removeClass("active"),i.parent().find(".val").text(i.data("title")),i.parent().find(".val").removeClass("plus minus").addClass(i.attr("class")),i.addClass("active")},e}(Page),PageImApplicant=function(){function t(){this.init()}return t.prototype.init=function(){},t.prototype.loadChatsInfo=function(t,e){$(e);t.preventDefault(),$(".attach input").click()},t}(),Feedback=function(t){function e(){t.call(this);var e=this;$("#F1feedback").submit(function(t){e.onFormSubmit(t,this)})}return __extends(e,t),e}(Page),CommonPages=function(t){function e(){var t=this;$("#DiContent .content-block p").click(function(e){t.onQuestClick(e,this)})}return __extends(e,t),e.prototype.onQuestClick=function(t,e){var n=$(e);$("#DiContent .content-block").find("div").slideUp(200),setTimeout(function(){n.next().slideDown(400)},300)},e}(Page),FLAG_DEBUG=1,G_VARS={appcache:{metro:{}},uniq:1,eid:0,idVac:0,countryID:0,country:0,cityWmetro:{},App:IndServ,userCities:{},userMetro:{},userWdays:{},DEF_LOGO_EMPL:"",locale:G_LOCALE};G_VARS.App=new IndServ,MainConfig.SITE=G_SITE,$(document).ready(function(){G_VARS.App.init(),"vacancy"==G_PAGE&&new PageVacancyView,"vacancy"==G_PAGE&&new PageSearchVacs,"register"!=G_PAGE&&"register-applicant"!=G_PAGE||(new PageRegister),"applicant-profile"==G_PAGE&&new PageApplicantProfile,"applocant-profile-own"!=G_PAGE&&"ankety"!=G_PAGE||new PageApplicantProfileOwn,"applicant-comments"==G_PAGE&&new PageApplicantComments,"company-profile-own"==G_PAGE&&new PageCompanyProfileOwn,"applicant-list"!=G_PAGE&&"ankety"!=G_PAGE||new PageApplicantList,"im"==G_PAGE&&2==G_USER_TYPE&&new PageImApplicant,"searchempl"!=G_PAGE&&"company-list"!=G_PAGE||new PageCompanyList,"company-services"==G_PAGE&&new PageCompanyServices,"services"==G_PAGE&&new PageServices,"login"==G_PAGE&&new PageLogin,"responses"==G_PAGE&&3==G_USER_TYPE&&new ResponsesCompany,"responses"==G_PAGE&&2==G_USER_TYPE&&new ResponsesApplic,"setrate"==G_PAGE&&new SetrateApplic,"feedback"==G_PAGE&&new Feedback,"page"==G_PAGE&&"faq"==G_ACTION_ID&&new CommonPages});var AutocompleteAjax=function(){function t(t,e){this.ajaxRetData={},this.selectObj={},this.selfObj={},this.loadObj={},this.options={ajaxParams:{}},this.vT1=0,this.afterItemSelectedFn=0;var n=this,i={ajaxParams:{inputName:"",url:"",addParams:{}},insertAllow:0,width:280,insertFirst:0,loadingGIF:MainConfig.PATH_PIC+"loading2.gif",labelText:"Chose smth",btnAddHint:"",afterItemSelected:null};$.extend(i.ajaxParams,e.ajaxParams),$.extend(i,e),e=i,n.options=e,n.selectObj=$(t),$('<div id="DiLoadingDDMA"><img src="'+n.options.loadingGIF+'" alt=""></div>').appendTo("body"),n.loadObj=$("#DiLoadingDDMA"),n.init()}return t.prototype.setAjaxParam=function(t,e){var n=this;return n.options.ajaxParams.addParams[t]=e,n},t.prototype.clear=function(){this.selfObj.find(".choices").empty()},t.prototype.setWidth=function(t){var e=this.selfObj;e.find(".dropdown-block").css({margin:"0 0 0 NaNpx",width:"100%px"}),e.find(".dropdown").css({width:"NaNpx"}),e.find("input.noinsert").css({width:"NaNpx"})},t.prototype.init=function(){var t=this;if(t.options.insertAllow)e='<input type="text" class="edit"/><a href="#" class="ok" title="Добавить в список"></a>';else var e='<input type="text" class="edit noinsert"/>';var n=t.selfObj=t.selectObj.after('<div class="autocomplete"><div class="dropdown-block"><label for="">'+t.options.labelText+"</label>"+e+'<div class="dropdown"><div class="title"></div><div class="close">x</div><div class="choices"></div></div></div></div>').next();t.setWidth(t.options.width),n.find(".add-btn").click(function(e){t.onAddBtnCLickFn(e,this)}),n.find("input.edit").keypress(function(t){return!(13==t.which)}).keyup(function(e){return t.onEditKeyPressFn(e,this)}).blur(function(e){t.onEditBlurFn(e,this)}),n.find(".ok").click(function(e){t.onOkBtnClickFn(e,this)}),n.find(".close").click(function(e){t.closeFn()})},t.prototype.onAddBtnCLickFn=function(t,e){var n=this,i=$(e);t.preventDefault(),i.toggleClass("opened"),n.selfObj.find(".dropdown-block").slideToggle(300).find("input").focus().select()},t.prototype.onEditBlurFn=function(t,e){var n=this;setTimeout(function(){$(e);n.closeFn()},300)},t.prototype.onEditKeyPressFn=function(t,e){t=t||event;var n=this,i=$(e),o=n.selfObj,a=o.find(".dropdown").stop().slideDown(300),s=o.find(".choices");clearTimeout(n.vT1),n.vT1=setTimeout(function(){n.showLoadingFn(i,1);var t={};t[n.options.ajaxParams.inputName]=i.val();for(var e in n.options.ajaxParams.addParams){var r=n.options.ajaxParams.addParams[e];t[e]=r}$.get(n.options.ajaxParams.url,t,function(t){t=JSON.parse(t),n.ajaxRetData=t,n.options.insertFirst,s.empty();for(var e in t)$("<a href='#' class='item'".concat(" data-name='",t[e].name,"' data-id='",t[e].id,"'>",t[e].name,"</a>")).appendTo(s);t.length<1?n.options.insertAllow?a.stop().slideUp(200):o.find(".title").text("Не найдено совпадений"):(o.find(".title").text(""),a.css({height:""}).slideDown(300)),a.find(".item").click(function(t){n.onDLItemCLickFn(t,this)})}).always(function(){n.hideLoadingFn()})},500)},t.prototype.closeFn=function(){var t=this;t.selfObj.find(".dropdown-block").slideUp(200),t.selfObj.find(".add-btn").removeClass("opened")},t.prototype.showLoadingFn=function(t,e){var n=this,i=n.loadObj;if(i.find("img").attr("src",n.options.loadingGIF),e){var o=1;o=$("*").is(t)?t.offset().top:1,i.css({left:t.offset().left+t.width()-i.width()-20,top:o+parseInt((t.outerHeight()-i.outerHeight())/2)-1})}i.fadeIn(400)},t.prototype.hideLoadingFn=function(){this.loadObj.fadeOut(400)},t.prototype.onDLItemCLickFn=function(t,e){var n=this,i=$(e);t.preventDefault(),i.closest(".dropdown-block").find("input").val(i.text());if(o=n.findAddedCity(i.text()))o.prop("selected",!0),o.parent().multipleSelect("refresh");else{var o=$("<option value='".concat(i.data("id"),"' selected>",i.text(),"</option>"));if(n.options.insertFirst>0){var a=n.selectObj.find("option");a.length>=n.options.insertFirst?n.options.insertFirst<2?o.prependTo(n.selectObj):$(a[n.options.insertFirst-2]).after(o):o.appendTo(n.selectObj)}else o.appendTo(n.selectObj);n.selectObj.multipleSelect("refresh")}n.closeFn(),""!=n.options.afterItemSelected&&n.options.afterItemSelected([i.data("id"),i.text()])},t.prototype.findAddedCity=function(t){return this.selectObj.find("option").each(function(){var e=$(this);if(e.text().toUpperCase()==t.toUpperCase())return e}),0},t.prototype.onOkBtnClickFn=function(t,e){var n=this,i=($(e),n.selfObj),o=i.find("[type=text]");t.preventDefault();var a=0;i.find(".item").each(function(){var t=$(this);t.data("name").toUpperCase()==o.val().toUpperCase()&&(a=t.data("id"))}),n.findAddedCity(o.val())||n.selectObj.prepend("<option value='".concat(a||o.val(),"' selected>",o.val(),"</option>")).multipleSelect("refresh"),n.closeFn()},t}(),AutocompleteHelper=function(){function t(){var t=this;t.defOpts={url:"",delay:800,limit:10,afterItemSelected:null},t.init()}return t.prototype.init=function(){},t.prototype.bind=function(t,e){var n=this,i=n.defOpts;return $.extend(i,e),n.options=i,n.selectObj=$(t),t.autocomplete({serviceUrl:i.url,params:{limit:i.limit},deferRequestBy:i.delay,onSearchComplete:function(t,e){G_VARS.App.hideLoading()},onSearchStart:function(e){G_VARS.App.showLoading2(t,{pic:2,align:"right"})},onSelect:function(t){i.afterItemSelected(t)},onSearchError:function(){G_VARS.App.hideLoading()}}),n},t}(),Localization=function(){function t(){this.StringsObj=new String}return t.translate=function(e){return this.Instance||(this.Instance=new t),this.Instance.translate(e)},t.prototype.translate=function(t){var e=this,n=t.split("."),i=e.StringsObj;for(var o in n)i=i[n[o]];return i},t}(),CustomError=function(t){function e(e,n,i){t.call(this,e),this.message=e,this.code=n,i&&(this.retCode=i)}return __extends(e,t),e}(Error),PushChecker=function(){function t(){}return t.prototype.init=function(){var t=this;t.getUserNewMessages(),t.getUserNewComments()},t.prototype.getUserNewMessages=function(){$.get(MainConfig.AJAX_GET_GETUSERNEWMESSAGES,{},function(t){try{if((t=JSON.parse(t)).newmessages.length){var e=0;$.each(t.newmessages,function(){e+=Number(this.count)}),$("#sm-notice-cnt b").html(e),$("#sm-notice-cnt").addClass("active")}}catch(t){}})},t.prototype.getUserNewComments=function(){$.get(MainConfig.AJAX_GET_GETUSERNEWCOMMENTS,{},function(t){try{t=JSON.parse(t),parseInt(t.newcomments)&&($("#sm-notice-cnt b").text(count),$("#sm-notice-cnt").addClass("active"))}catch(t){}})},t}(),Strings_ru=function(){function t(){}return t.AJAX_GET_CITYES="/ajax/getcities/",t}(),InputFields=function(){function t(){}return t.prototype.checkPhone=function(t){return $this=$(t),11==$this.val().replace(/\D+/g,"").length?($this.removeClass("error"),!0):($this.addClass("error"),!1)},t.prototype.checkEmail=function(t){return $this=$(t),""!=$this.val()&&/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i.test($this.val())?($this.removeClass("error"),!0):($this.addClass("error"),!1)},t.prototype.setPhoneMask=function(t){t.mask("+7(999) 999-99-99"),t.val("+7(___) ___-__-__")},t}();