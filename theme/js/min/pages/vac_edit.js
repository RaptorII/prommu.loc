!function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}({0:function(t,i,e){"use strict";var n=e(6);$(document).ready(function(){new n.PageVacancyEdit})},6:function(t,i){"use strict";var e=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)},n=function(t){function i(){t.call(this),this.doljChoice="aa",this.isEditMode=!1;var i=this;$("#EdPaylim").change(function(){i.onEdPaylimChange(this)}),$("#BtnSubmit").click(function(t){i.onF1vacancySubmit(t,this)}),i.init()}return e(i,t),i.prototype.init=function(){var t=this;Hinter.bind(".btn-edit-block:not(.tmpl) a"),$(".js-btnAddCity button").click(function(i){t.onAddCityClickFn(i,this)}),$("#DiCitiBlocks").on("click",".locations-block .btn-close a",function(i){t.onCloseLocationClickFn(i,this)}),$("#DiCitiBlocks").on("click","div.btn-editcity-bind a",function(i){t.onEditCityInfoClickFn(i,this)}),$("#DiCitiBlocks").on("click",".ph-city-info-block-wrapp .error-message a",function(i){t.onCityDataRefreshClickFn(i,this)}),$("#DiCitiBlocks").on("click",".city-block:not(.new-block-bind) .btn-save-city-bind .cancel",function(i){t.onCityBlockCancelClickFn(i,this)}),$("#DiCitiBlocks").on("click",".btn-save-city-bind .save",function(i){t.onCityBlockSaveClickFn(i,this)}),$("#DiCitiBlocks").on("click",".new-block-bind .btn-save-city-bind .cancel",function(i){t.onNewCityBlockCancelClickFn(i,this)}),$("#DiCitiBlocks").on("click",".ph-city-info-block .btn-city-close a",function(i){t.onCityDelClickFn(i,this)}),$("#DiCitiBlocks").on("click",".BtnAddLoc button",function(i){t.onAddLocationClick(i,this)}),$("#DiCitiBlocks").on("click",".btn-edit-block a",function(i){t.onEditLocationClickFn(i,this)}),$("#DiCitiBlocks").on("click",".location-wrapper .error-edit-bind a, .location-wrapper .error-message a",function(i){t.onLocDataRefreshClickFn(i,this)}),$("#DiCitiBlocks").on("click",".location-wrapper:not(.new-location) .btn-save-location-bind .cancel",function(i){t.onEditLocCancelClickFn(i,this)}),$("#DiCitiBlocks").on("click",".location-wrapper.new-location .btn-save-location-bind .cancel",function(i){t.onNewLocCancelClickFn(i,this)}),$("#DiCitiBlocks").on("click",".locations-block .edit-period-btns .add-per-bind, .js-city-block .edit-period-btns .add-per-bind",function(i){t.onAddPeriodClickFn(i,this)}),$("#DiCitiBlocks").on("click",".locations-block .edit-period-btns .del-per-bind",function(i){t.onDelPeriodClickFn(i,this)}),$("#DiCitiBlocks").on("click",".locations-block .btn-close-bind a",function(i){t.onLocationDelClickFn(i,this)}),$(".js-city-block").on("click",".edit-period-btns .add-per-bind",function(i){t.onAddPeriodClickFn(i,this)}),$(".js-city-block").on("click",".edit-period-btns .del-per-bind",function(i){t.onDelPeriodClickFn(i,this)}),$("#F1save, #F1vacancy").submit(function(i){t.onFormSubmit(i,this)}),$("#BtnSubmit").click(function(t){$(this).closest("form").submit()}),$("#CB7exp").change(function(){var t=$(".exp-block");t.hasClass("show")&&t.show().removeClass("show"),1==$(this).val()?t.slideUp(200):t.slideDown(400)});var i=new Date;i.setDate(i.getDate()+1),$("#EdDateAU").datepicker({format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,startDate:i,autoclose:!0,language:"ru"}),$("#CB1Dolj").change(function(){}).multipleSelect({placeholder:"выберите должность...",selectAll:!1,countSelected:"# / %",onUncheckAll:function(i){t.onCB1DoljChangeFn(i)},onClick:function(i){t.onCB1DoljChangeFn(i)},onCheckAll:function(i){t.onCB1DoljChangeFn(i,1)}});var e=$(".js-city-block");(new AutocompleteHelper).bind(e.find(".js-city"),{url:MainConfig.AJAX_GET_VE_GET_CITIES,afterItemSelected:function(t){var i=e.find(".js-city");"man"==t.data?i.parent().find(".js-bind").text("("+i.data("man")+")"):i.parent().find(".js-bind").text(" "),e.find(".js-idcity").val(t.data)}});var n={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:new Date,language:G_VARS.locale},o=$(".js-city-block .period-line-edit").find(".js-edate");$(".js-city-block .period-line-edit").find(".js-bdate").datepicker(n).on("changeDate",function(t,i){var e=$(".js-city-block .period-line-edit").find(".js-edate");e.datepicker("setStartDate",t.date),e.datepicker("setDate",t.date)}),o.datepicker(n);var o=$("#DiCitiBlocks .date-end-block input, .js-city-block .date-end-block input");$("#DiCitiBlocks .date-start-block input, .js-city-block .date-start-block input").datepicker({format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,startDate:new Date,autoclose:!0,language:G_VARS.locale}).on("changeDate",function(t,i){o.datepicker("setStartDate",t.date),o.datepicker("setDate",t.date)}),o.datepicker({format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,startDate:new Date,autoclose:!0,language:G_VARS.locale}),$("#CBlangs").change(function(){}).multipleSelect({placeholder:"выберите языки...",selectAllText:"Выбрать все/снять выделение",allSelected:"Выбраны все варианты",countSelected:"# / %",onUncheckAll:function(i){t.onCBlangsChangeFn(i)},onCheckAll:function(i){t.onCBlangsChangeFn(i,1)},onClick:function(i){t.onCBlangsChangeFn(i)}}),t.bindFiltersFn(".js-city-block"),t.FormCheckers.addCheckerCustom("salary",function(i){return t.onSubmitSalaryCheck(i)}),t.FormCheckers.addCheckerCustom("sex",function(i){return t.onSubmitSexCheck(i)})},i.prototype.addMetro=function(t){var i=this,e=t.id;G_VARS.appcache["metro"+e]?(i.fillMetroBlockAll({obj:t.obj,data:G_VARS.appcache["metro"+e],id:t.id}),G_VARS.App.hideLoading()):$.get(MainConfig.AJAX_GET_METRO,{idcity:e},function(n){n=JSON.parse(n),G_VARS.appcache["metro"+e]=n,i.fillMetroBlockAll({obj:t.obj,data:n,id:t.id})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.fillMetroBlockAll=function(t){for(var i=this,e=t.obj.find(".locations-block"),n=0,o=e.length;n<o;n++)i.fillMetroBlock(CommFuncs.merge(t,{obj:e.eq(n)}))},i.prototype.fillMetroBlock=function(t){var i=t.obj.find(".ph-metro-block"),e=t.data,n=i.find("select");n.empty(),$("<option value='0'>"+n.data("defitm")+"</option>").appendTo(n);for(var o in e){var a=e[o],l=a.id==t.mid?"selected":"";$("<option value='"+a.id+"' "+l+">"+a.name+"</option>").appendTo(n)}i.slideDown(400)},i.prototype.onCB2cityChangeFn=function(t,i){var e=$("#CB2city").multipleSelect("getSelects"),n=($("#CB2city").multipleSelect("getSelects","text"),0);for(var o in e)if("aa"==e[o]){n=1;break}n?$("#DiCityCustom").slideDown(400):$("#DiCityCustom").slideUp(200),e.length?($("#CBcountry").slideUp(200),$("#EdCountry").slideDown(200)):($("#EdCountry").slideUp(200),$("#CBcountry").slideDown(200));var a=[];$("#DiMetroesBlock .metro-block").each(function(){var t=parseInt($(this).attr("data-id"));a.push(t);var i=0;for(var n in e)if(t==e[n]){i=1;break}i?$(this).slideDown(400,function(){$(this).find("select").prop("disabled",!1)}):$(this).slideUp(200,function(){$(this).find("select").prop("disabled",!0)})})},i.prototype.onCB1DoljChangeFn=function(t,i){var e=this,n=$("#CB1Dolj").multipleSelect("getSelects"),o=$("#CB1Dolj").multipleSelect("getSelects","text");$("#CB1DoljData").text(o.join(", ")),i&&$("#CB1DoljData").text("");var a=0;for(var l in n)if(e.doljChoice==n[l]){a=1;break}a?$(".self-dolg").slideDown(400):$(".self-dolg").slideUp(200)},i.prototype.onCBlangsChangeFn=function(t,i){var e=$("#CBlangs").multipleSelect("getSelects"),n=$("#CBlangs").multipleSelect("getSelects","text"),o=[];$(".lang-level").each(function(){var t=parseInt($(this).attr("data-id"));o.push(t);var i=0;for(var n in e)if(e[n]==t){i=1;break}i||$(this).slideUp(200,function(){$(this).remove()})});for(var a in e){var l=0;for(var c in o)if(o[c]==e[a]){l=1;break}if(!l){var d=$(".langs-level-tmlp").clone();d.attr("data-id",e[a]).toggleClass("langs-level-tmlp lang-level"),d.hide();var s=d.find("label"),r=s.attr("for")+e[a];s.attr("for",r),s.text(s.text()+"".concat(" (",n[a],"):"));var p=d.find("select");p.attr("id",r),p.attr("name",p.attr("name")+"["+e[a]+"]"),$("#DiLangsLevels").append(d),d.slideDown(400)}}},i.prototype.onEdPaylimChange=function(t){"135"==$(t).val()?$("#EdPaylimSelf").slideDown(400):$("#EdPaylimSelf").slideUp(200,function(){$(this).removeClass("show")})},i.prototype.onBlurAfterErrorFn=function(t){},i.prototype.onF1vacancySubmit=function(t,i){var e="",n=0;t.preventDefault();var o=$("#Mtitle");if(o.length){var a=o.val();""==a?(n=1,e="Необходимо заполнить заголовок вакансии"):a.length>70&&(n=1,e="Длина заголовка не должна превышать 70 символов")}if(!n){var o=$("#M1requirements");if(o.length){var a=o.val();n||""!=a||(n=1,e="Необходимо заполнить описание вакансии ")}}if(!n){var o=$("#M2duties");if(o.length){var a=o.val();n||""!=a||(n=1,e="Необходимо заполнить обязанности ")}}if(!n){var o=$("#M3conditions");if(o.length){var a=o.val();""==a&&(n=1,e="Необходимо заполнить условия ")}}if(!n){var o=$("#CB1Dolj").next(".ms-parent");if(o.length){var a=$("#CB1Dolj").val();(!a||a.length<1)&&(n=1,e="Необходимо выбрать должность ")}}if(!n)for(var l in a)"aa"==a[l]&&(o=$("#Ed1SelfDolg"),o.length&&(a=o.val(),o.val().length<1&&(n=1,e="Необходимо заполнить свой вариант должности")));if(!n){var o=$("#CB2city").nextUntil(".ms-parent");if(o.length){var a=$("#CB2city").val();(!a||a.length<1)&&(n=1,e="Необходимо выбрать город ")}}if(!n){var o=$("#CB5busy"),a=$("#CB5busy").val(),c=0==a,o=$("#Hi1DateWS"),a=$("#Hi1DateWS").val();if(""==a&&(n=1,e="Необходимо ввести дату начала работы"),!n&&c){var o=$("#Hi2DateWE"),a=$("#Hi2DateWE").val(),d=moment(a,"DD.MM.YYYY");if(""==a&&(n=1,e="Необходимо ввести дату завершения работы"),!n){var o=$("#Hi1DateWS"),a=$("#Hi1DateWS").val(),s=moment(a,"DD.MM.YYYY");s.isAfter(d)&&(n=1,e="Дата начала больше даты окончания")}}}n?$("body").stop().animate({scrollTop:o.offset().top-30+"px"},500,function(){var t=$(".error-hint-box");t.text(e).css({left:o.offset().left,top:o.offset().top+o.outerHeight()+10}),t.fadeIn(400),o.addClass("field--warning"),o.focus(),o.hasClass("ms-parent")||o.hasClass("dropdown-multi")?setTimeout(function(){t.fadeOut(200),o.removeClass("field--warning")},3e3):o.on("blur",function(){t.fadeOut(200),o.removeClass("field--warning"),$(this).off("blur")})}):$("#F1vacancy").submit()},i.prototype.onCountryChangeFn=function(t,i){var e=this;e.CBcityMulti.setAjaxParam("idco",$(i).val()).clear(),$("#DiMetroesBlock").empty(),$("#CB2city").empty().multipleSelect("refresh");var n=$("#CBcountry")[0];$("#EdCountry").val(n.options[n.selectedIndex].innerHTML)},i.prototype.onAddCityClickFn=function(t,i){var e=this;$(i);t.preventDefault();var n=$(".city-block-tpl").clone();n.hide().toggleClass("city-block city-block-tpl tmpl"),$("#DiCitiBlocks").append(n);var o=n.find(".ph-city-info-block-wrapp"),a=$(".city-editblock-tpl").clone();a.toggleClass("city-editblock city-editblock-tpl tmpl"),a.find(".ph-id").val("new"),a.find(".btn-city-close").remove(),(new AutocompleteHelper).bind(a.find(".ph-city"),{url:MainConfig.AJAX_GET_VE_GET_CITIES,afterItemSelected:function(t){a.find(".ph-idcity").val(t.data)}});var l=new Date;l.setDate(l.getDate());var c={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:l,language:G_VARS.locale};$(a.find(".ph-bdate, .ph-edate")).datepicker(c),o.find(".ph-city-info-block").html(a),Hinter.bind(o.find(".has-hint")),n.slideDown(400,function(){n.find(".ph-city").focus()}),e.startEditBlock()},i.prototype.onAddPeriodClickFn=function(t,i){var e=this,n=$(i);t.preventDefault();var o=n.closest(".period-line-edit"),a=$(".period-line-edit-tpl").clone();a.toggleClass("period-line-edit period-line-edit-tpl tmpl");var l=new Date;l.setDate(l.getDate());var c={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:l,language:G_VARS.locale};$(a.find(".ph-bdate, .ph-edate")).datepicker(c),a.hide(),a.insertAfter(o),a.slideDown(300),e.bindFiltersFn(a),Hinter.bind(a.find(".has-hint"))},i.prototype.onAutocompleteFn=function(t){var i=this,e=t.closest(".city-block"),n=t.find(".EdCity").getSelectedItemData();G_VARS.App.showLoading(t.find(".EdCity"),1),e.attr("data-id",n.id),t.find(".BtnAddLoc").fadeIn(400),t.find(".HiCity").val(n.id),i.setLocationsElmsIds(e,n.id),t.find(".metro-select").slideUp(200),t.find(".metro-select select").empty(),"1"==n.ismetro&&i.addMetro({id:n.id,obj:e}),G_VARS.App.hideLoading()},i.prototype.setLocationsElmsIds=function(t,i){t.find(".date-start-block input").attr("name","date[start]["+i+"]"),t.find(".date-end-block input").attr("name","date[end]["+i+"]"),t.find(".EdLocName").attr("name","location["+i+"][name][]"),t.find(".EdLocAddr").attr("name","location["+i+"][addr][]"),t.find(".day-from, .day-to").each(function(){var t=$(this);t.attr("name","week-day["+i+"]["+t.data("name")+"]["+(t.hasClass("day-from")?"f":"t")+"][]")})},i.prototype.onAddLocationClick=function(t,i){var e=this,n=$(i);e.startEditBlock();var o=n.closest(".city-block"),a=o.find(".locations-block"),l=$(".location-wrapper-tpl").clone();l.toggleClass("location-wrapper new-location location-wrapper-tpl tmpl");var c=$(".location-edit-tpl").clone();c.toggleClass("location-edit new-location location-edit-tpl tmpl"),c.find(".ph-idloc").val("new"),c.find(".ph-idcity").val(o.data("id")),c.find(".btn-close").remove();var d=o.data("idcity"),s=G_VARS.appcache["metro"+d];s?e.fillMetroBlock({obj:c,data:s}):c.find(".ph-metro-block").parent().hide(),l.find(".ph-info-block").html(c),l.hide(),a.append(l),l.slideDown(400,function(){return c.find(".ph-locname").focus()});var r=$(".period-line-edit-tpl").clone();r.toggleClass("period-line-edit period-line-edit-tpl tmpl"),c.find(".ph-periods").append(r);var p=new Date;p.setDate(p.getDate());var f={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:p,language:G_VARS.locale};c.find(".ph-bdate, .ph-edate").datepicker(f),Hinter.bind(c.find(".has-hint")),e.bindFiltersFn(c),l.find(".block-form-bind").submit(function(t){e.onFormSubmit(t,this,{justReturn:!0})&&e.onLocationSaveClickFn(t,this)})},i.prototype.onCloseLocationClickFn=function(t,i){var e=$(i);t.preventDefault(),e.closest(".location").slideUp(200,function(){$(this).remove()})},i.prototype.onCityDelClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".ph-city-info-block-wrapp"),a=n.closest(".city-block");if(t.preventDefault(),confirm(_t("delconfirm"))){var l=n.closest(".city-block").data("id");G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400),$.get(MainConfig.AJAX_POST_VE_CITY_DELETE_BLOCK,{id:l},function(t){t&&(t=JSON.parse(t));var i=0;t?t.error<0?(console.info("E",t.error),o.find(".ph-message").text(t.message),o.find(".blind").fadeOut(200)):100==t.error?(a.slideUp(200,function(){this.remove()}),e.endEditBlock()):i=1:i=1,i&&(o.find(".error-del-block").css({display:"flex"}),setTimeout(function(){o.find(".blind").css({opacity:".7"})},500))}).fail(function(){o.find(".error-del-block").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})}},i.prototype.onLocationDelClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".location-wrapper");if(t.preventDefault(),confirm(_t("delconfirm"))){var a=o.data("id");G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400),$.get(MainConfig.AJAX_POST_VE_LOCATION_DELETE,{id:a},function(t){var i=0;try{t&&(t=JSON.parse(t)),t.error<0?(console.info("E",t.error),o.find(".ph-message").text(t.message),o.find(".blind").fadeOut(200)):100==t.error?(o.slideUp(200,function(){this.remove()}),e.endEditBlock()):i=1}catch(t){i=1}i&&(o.find(".error-del-bind").css({display:"flex"}),setTimeout(function(){o.find(".blind").css({opacity:".7"})},500))}).fail(function(){o.find(".error-del-bind").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})}},i.prototype.onEditCityInfoClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".ph-city-info-block-wrapp");t.preventDefault(),e.startEditBlock(o);var a=n.parent().data("id");G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400),$.get(MainConfig.AJAX_GET_VE_CITY_BLOCK_DATA,{id:a},function(t){t=JSON.parse(t);var i=$(".city-editblock-tpl").clone();i.toggleClass("city-editblock city-editblock-tpl tmpl"),i.find(".ph-id").val(t.id),i.find(".ph-idcity").val(t.idcity),i.find(".ph-city").val(t.name),i.find(".ph-bdate").val(t.bdate),i.find(".ph-edate").val(t.edate),t.idcity<1&&i.find(".ph-city").parent().find(".js-bind").text("("+i.find(".ph-city").data("man")+")"),(new AutocompleteHelper).bind(i.find(".ph-city"),{url:MainConfig.AJAX_GET_VE_GET_CITIES,afterItemSelected:function(t){var e=i.find(".ph-city");"man"==t.data?e.parent().find(".js-bind").text("("+e.data("man")+")"):e.parent().find(".js-bind").text(" "),i.find(".ph-idcity").val(t.data)}});var e=new Date;e.setDate(e.getDate());var n={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:e,language:G_VARS.locale};$(i.find(".ph-bdate, .ph-edate")).datepicker(n),o.find(".ph-city-info-block").html(i),o.find(".blind").fadeOut(200),Hinter.bind(o.find(".has-hint"))}).fail(function(){o.find(".error-load-form").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.onEditLocationClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".location-wrapper");t.preventDefault(),e.startEditBlock(o),G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400);var a={};a.id=o.data("id"),a.idcity=o.data("idcity"),G_VARS.appcache["metro"+a.idcity]&&(a.idcity=""),$.get(MainConfig.AJAX_GET_VE_LOCATION_DATA,a,function(t){var i=0;try{if(t&&(t=JSON.parse(t)),t.loc){var n=t.loc,a=$(".location-edit-tpl").clone();a.toggleClass("location-edit location-edit-tpl tmpl"),a.find(".ph-locname").val(n.name),a.find(".ph-idloc").val(n.id),a.find(".ph-locaddr").val(n.addr);var l=G_VARS.appcache["metro"+n.idcity]?G_VARS.appcache["metro"+n.idcity]:t.metro;l&&e.fillMetroBlock({obj:a,data:l,mid:n.mid});for(var c in n.loctimes){var d=n.loctimes[c],s=$(".period-line-edit-tpl").clone();s.toggleClass("period-line-edit period-line-edit-tpl tmpl"),s.find(".ph-bdate").val(d[0]),s.find(".ph-edate").val(d[1]),s.find(".ph-btime").val(d[2]),s.find(".ph-etime").val(d[3]),a.find(".ph-periods").append(s);var r=new Date;r.setDate(r.getDate());var p={format:"dd.mm.yyyy",todayBtn:"linked",calendarWeeks:!0,autoclose:!0,startDate:r,language:G_VARS.locale};a.find(".ph-bdate, .ph-edate").datepicker(p),Hinter.bind(a.find(".has-hint"))}o.find(".ph-info-block").html(a),o.find(".blind").fadeOut(200),e.bindFiltersFn(o),o.find(".block-form-bind").submit(function(t){e.onFormSubmit(t,this,{justReturn:!0})&&e.onLocationSaveClickFn(t,this)})}else i=1}catch(t){i=1}i&&(o.find(".error-edit-bind").css({display:"flex"}),setTimeout(function(){o.find(".blind").css({opacity:".7"})},500))}).fail(function(){o.find(".error-edit-bind").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.onCityBlockSaveClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".ph-city-info-block-wrapp"),a=n.closest(".city-block"),l=o.find(".ph-idcity").val();G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400);var c=G_VARS.appcache["metro"+l]?"":"&metro=1",d=o.find(".block-form").serialize()+c;$.post(MainConfig.AJAX_POST_CITY_DATA,d,function(t){t&&(t=JSON.parse(t));var n=0;t?t.error<0?(console.info("E",t.error),o.find(".ph-message").text(t.message),o.find(".blind").fadeOut(200)):100==t.error?(a.hasClass("new-block-bind")&&(a.attr("data-id",t.id),a.attr("data-idcity",l)),t.data&&t.data.metro&&(G_VARS.appcache["metro"+l]=t.data.metro),e.cityDataRefresh(i,{message:t.message,class:"-green"})):n=1:n=1,n&&(a.hasClass("new-block-bind")?o.find(".error-save-new").css({display:"flex"}):o.find(".error-save-form").css({display:"flex"}),setTimeout(function(){o.find(".blind").css({opacity:".7"})},500))}).fail(function(){o.find(".error-load-form").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.onLocationSaveClickFn=function(t,i){var e=this,n=$(i),o=n.closest(".location-wrapper");G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400);var a=o.find(".block-form-bind").serialize();$.post(MainConfig.AJAX_POST_LOCATION_DATA,a,function(t){var n=0;try{t&&(t=JSON.parse(t)),t.error<0?(console.info("E",t.error),o.find(".ph-message").text(t.message),o.find(".blind").fadeOut(200)):100==t.error?(o.hasClass("new-location")&&o.attr("data-id",t.id),e.locationDataRefresh(i,{message:t.message,class:"-green"})):n=1}catch(t){n=1}n&&(o.hasClass("new-location")?o.find(".error-save-new-bind").css({display:"flex"}):o.find(".error-save-bind").css({display:"flex"}),setTimeout(function(){o.find(".blind").css({opacity:".7"})},500))}).fail(function(){o.hasClass("new-location")?o.find(".error-save-new-bind").css({display:"flex"}):o.find(".error-save-bind").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.onCityBlockCancelClickFn=function(t,i){var e=this;e.cityDataRefresh(i)},i.prototype.onNewCityBlockCancelClickFn=function(t,i){var e=this,n=$(i);n.closest(".city-block").slideUp(200,function(){this.remove(),e.endEditBlock()})},i.prototype.onNewLocCancelClickFn=function(t,i){var e=this,n=$(i);n.closest(".location-wrapper").slideUp(200,function(){this.remove(),e.endEditBlock()})},i.prototype.onEditLocCancelClickFn=function(t,i){var e=this;e.locationDataRefresh(i)},i.prototype.onCityDataRefreshClickFn=function(t,i){var e=this;$(i);t.preventDefault(),e.cityDataRefresh(i)},i.prototype.onLocDataRefreshClickFn=function(t,i){var e=this;$(i);t.preventDefault(),e.locationDataRefresh(i)},i.prototype.cityDataRefresh=function(t,i){var e=this,n=$(t),o=n.closest(".city-block").data("id"),a=n.closest(".ph-city-info-block-wrapp");G_VARS.App.showLoading2(a,{pic:1,withBg:!0}),a.find(".blind").fadeIn(400),$.get(MainConfig.AJAX_GET_VE_CITY_BLOCK_DATA,{id:o},function(t){t=JSON.parse(t);var n=$(".city-info-block-tpl").clone();n.toggleClass("city-info-block-tpl tmpl"),n.find(".ph-editbtn").toggleClass("tmpl").attr("data-id",t.id),n.find(".ph-editbtn a").attr("title",function(i,e){return e.replace("#PH_CITY_NAME#",t.name)}),n.find(".ph-city").text(t.name),n.find(".ph-bdate").text(t.bdate),n.find(".ph-edate").text(t.edate),i&&i.message&&n.find(".ph-message").addClass(i.class).text(i.message).slideDown(400),a.find(".ph-city-info-block").html(n),Hinter.bind(n.find(".ph-editbtn a")),a.find(".error-message").css({display:"none"}),e.endEditBlock(),a.find(".blind").fadeOut(200)}).fail(function(){a.find(".error-message").css({display:"none"}),a.find(".error-data-refresh").css({display:"flex"}),a.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.locationDataRefresh=function(t,i){var e=this,n=$(t),o=n.closest(".location-wrapper"),a=o.data("id");G_VARS.App.showLoading2(o,{pic:1,withBg:!0}),o.find(".blind").fadeIn(400),$.get(MainConfig.AJAX_GET_VE_LOCATION_DATA,{id:a},function(t){try{t=JSON.parse(t),t=t.loc;var n=$(".location-view-tpl").clone();n.toggleClass("location-view location-view-tpl tmpl"),n.find(".ph-editbtn").toggleClass("tmpl"),n.find(".ph-editbtn a").attr("title",function(i,e){return e.replace("#PH_LOCNAME_NAME#",t.name)}),n.find(".ph-locname").text(t.name),n.find(".ph-locaddr").text(t.addr),t.mname?n.find(".ph-metro").text(t.mname):n.find(".ph-metro").closest(".ph-mblock").hide(),n.find(".periods-wrapp-bind").hide();for(var a in t.loctimes){var l=t.loctimes[a];if(l[0]){var c=$(".period-line-tpl").clone();c.toggleClass("period-line period-line-tpl tmpl"),c.find(".ph-bdate").text(l[0]),c.find(".ph-edate").text(l[1]),c.find(".ph-btime").text(l[2]),c.find(".ph-etime").text(l[3]),n.find(".ph-periods").append(c),n.find(".periods-wrapp-bind").show()}}i&&i.message&&n.find(".ph-message").addClass(i.class).text(i.message).slideDown(400),o.find(".ph-info-block").html(n),Hinter.bind(n.find(".ph-editbtn a")),o.find(".error-message").css({display:"none"}),e.endEditBlock(),o.find(".blind").fadeOut(200)}catch(t){o.find(".error-message").css({display:"none"}),o.find(".error-refresh-bind").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}}).fail(function(){o.find(".error-message").css({display:"none"}),o.find(".error-refresh-bind").css({display:"flex"}),o.find(".blind").css({opacity:".7"})}).always(function(){G_VARS.App.hideLoading()})},i.prototype.startEditBlock=function(t){var i=this;$(".err-msg-block").slideUp(200),t&&t.find(".error-message").css({display:"none"}),i.isEditMode=!0,$(".control-btn").css({opacity:0})},i.prototype.endEditBlock=function(){var t=this;t.isEditMode=!1,$(".control-btn").css({opacity:""})},i.prototype.onDelPeriodClickFn=function(t,i){t.preventDefault();var e=$(i).closest(".period-line-edit");e.slideUp(200,function(){this.remove()})},i.prototype.onSubmitSalaryCheck=function(t){for(var i=!0,e=$(".js-salary"),n=0,o=e.length;n<o;n++){var a=e[n];if(""!=a.value)return i=!1,!1}return i},i.prototype.onSubmitSexCheck=function(t){return!$("#Chk1Mans").parent().hasClass("checked")&&!$("#Chk2Womens").parent().hasClass("checked")},i}(Page);i.PageVacancyEdit=n}});